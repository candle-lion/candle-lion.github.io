<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>烛狮</title>
  
  <subtitle>万法归一</subtitle>
  <link href="https://www.blog.candle-lion.com/atom.xml" rel="self"/>
  
  <link href="https://www.blog.candle-lion.com/"/>
  <updated>2023-08-20T02:33:28.629Z</updated>
  <id>https://www.blog.candle-lion.com/</id>
  
  <author>
    <name>烛狮</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Soul逆向分析实战</title>
    <link href="https://www.blog.candle-lion.com/2023/08/20/fbaff6bf9d76/"/>
    <id>https://www.blog.candle-lion.com/2023/08/20/fbaff6bf9d76/</id>
    <published>2023-08-20T02:18:19.000Z</published>
    <updated>2023-08-20T02:33:28.629Z</updated>
    
    <content type="html"><![CDATA[<h1 id="参考资料连接"><a class="markdownIt-Anchor" href="#参考资料连接"></a> 参考资料连接</h1><p><a href="https://blog.csdn.net/weixin_61845324/article/details/131454938">https://blog.csdn.net/weixin_61845324/article/details/131454938</a></p><h1 id="1-下载依赖软件"><a class="markdownIt-Anchor" href="#1-下载依赖软件"></a> 1. 下载依赖软件</h1><h2 id="11-下载apktool"><a class="markdownIt-Anchor" href="#11-下载apktool"></a> 1.1 下载apktool</h2><p><a href="https://www.aliyundrive.com/s/RnAQwEkCVML">apktool_2.8.1.jar</a></p><p>官方：<a href="https://github.com/iBotPeaches/Apktool/releases">https://github.com/iBotPeaches/Apktool/releases</a></p><h1 id="2-反编译apk"><a class="markdownIt-Anchor" href="#2-反编译apk"></a> 2. 反编译apk</h1><p>将apktool工具和需要反编译的apk放到同一目录下<br /><img src="img.png" alt="img.png" /><br />执行如下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将soul_channel_soul64.apk 反编译输出到tmp目录下</span></span><br><span class="line">java -jar apktool_2.8.1.jar d soul_channel_soul64.apk -o tmp</span><br></pre></td></tr></table></figure><p><img src="img_1.png" alt="img_1.png" /></p><p>tmp目录下各个目录的用途：</p><ul><li>original：保存了原始的 AndroidManifest.xml 和签名信息</li><li>res：应用程序的资源文件目录，包含了应用程序的布局文件、字符串资源、图片资源等。</li><li>smali：应用程序的 Smali 代码目录，包含了应用程序的所有 Smali 代码文件（Smali 就是字节码）</li><li>assets：应用程序的 assets 目录，包含了应用程序需要使用的各种资源文件，例如音频、视频、图片、配置文件等。</li><li>lib：应用程序的库目录，包含了应用程序需要使用的库文件，例如 so 文件等。</li><li>AndroidManifest.xml：应用程序的清单文件，包含应用程序的名称、包名、版本号、权限等信息。</li><li>apktool.yml：是 APKTool 工具使用的配置文件，用于指定反编译和打包 APK 文件时的各种参数和选项。</li></ul><h2 id="21-添加debug配置"><a class="markdownIt-Anchor" href="#21-添加debug配置"></a> 2.1 添加Debug配置</h2><p>编辑AndroidManifest.xml，在Application标签里面加上android:debuggable=“true”<br /><img src="img_2.png" alt="img_2.png" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;参考资料连接&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#参考资料连接&quot;&gt;&lt;/a&gt; 参考资料连接&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/weixin_61845324/article/detai</summary>
      
    
    
    
    <category term="Android" scheme="https://www.blog.candle-lion.com/categories/Android/"/>
    
    
    <category term="逆向分析" scheme="https://www.blog.candle-lion.com/tags/%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>X509证书生成与读取</title>
    <link href="https://www.blog.candle-lion.com/2022/11/08/a91342c0e4d7/"/>
    <id>https://www.blog.candle-lion.com/2022/11/08/a91342c0e4d7/</id>
    <published>2022-11-08T15:49:49.660Z</published>
    <updated>2023-08-19T21:22:28.936Z</updated>
    
    <content type="html"><![CDATA[<h1 id="mainjava"><a class="markdownIt-Anchor" href="#mainjava"></a> Main.java</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> certificate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.security.KeyFactory;</span><br><span class="line"><span class="keyword">import</span> java.security.KeyPair;</span><br><span class="line"><span class="keyword">import</span> java.security.PrivateKey;</span><br><span class="line"><span class="keyword">import</span> java.security.PublicKey;</span><br><span class="line"><span class="keyword">import</span> java.security.cert.CertificateFactory;</span><br><span class="line"><span class="keyword">import</span> java.security.cert.X509Certificate;</span><br><span class="line"><span class="keyword">import</span> java.security.spec.PKCS8EncodedKeySpec;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.util.io.pem.PemObject;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.util.io.pem.PemReader;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.util.io.pem.PemWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Main</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 烛狮</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022-11-08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 主函数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args 参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String clientCertificatePath = <span class="string">&quot;/opt/client_cert.der&quot;</span>;</span><br><span class="line">            String clientPrivateKeyPath = <span class="string">&quot;/opt/client_private_key.der&quot;</span>;</span><br><span class="line">            String clientPublicKeyPath = <span class="string">&quot;/opt/client_public_key.der&quot;</span>;</span><br><span class="line"></span><br><span class="line">            File clientCertificateFile = FileUtils.getFile(clientCertificatePath);</span><br><span class="line">            File clientPrivateKeyFile = FileUtils.getFile(clientPrivateKeyPath);</span><br><span class="line">            File clientPublicKeyFile = FileUtils.getFile(clientPublicKeyPath);</span><br><span class="line">            <span class="keyword">if</span> (!clientCertificateFile.exists() &amp;&amp; !clientPrivateKeyFile.exists() &amp;&amp; !clientPublicKeyFile.exists()) &#123;</span><br><span class="line">                KeyPair keyPair = SelfSignedCertificateGenerator.generateRsaKeyPair(<span class="number">4096</span>);</span><br><span class="line">                SelfSignedCertificateBuilder builder =</span><br><span class="line">                    <span class="keyword">new</span> SelfSignedCertificateBuilder(keyPair).setCommonName(<span class="string">&quot;Eclipse Milo Example Client&quot;</span>)</span><br><span class="line">                        .setOrganization(<span class="string">&quot;digitalpetri&quot;</span>).setOrganizationalUnit(<span class="string">&quot;dev&quot;</span>).setLocalityName(<span class="string">&quot;Folsom&quot;</span>)</span><br><span class="line">                        .setStateName(<span class="string">&quot;CA&quot;</span>).setCountryCode(<span class="string">&quot;US&quot;</span>).setApplicationUri(<span class="string">&quot;urn:eclipse:milo:examples:client&quot;</span>)</span><br><span class="line">                        .addDnsName(<span class="string">&quot;localhost&quot;</span>).addIpAddress(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Get as many hostnames and IP addresses as we can listed in the certificate.</span></span><br><span class="line">                builder.addIpAddress(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">                builder.addDnsName(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">                X509Certificate certificate = builder.build();</span><br><span class="line">                <span class="keyword">try</span> (PemWriter pemWriter = <span class="keyword">new</span> PemWriter(<span class="keyword">new</span> FileWriter(clientCertificateFile));) &#123;</span><br><span class="line">                    pemWriter.writeObject(<span class="keyword">new</span> PemObject(<span class="string">&quot;X509 CERTIFICATE&quot;</span>, certificate.getEncoded()));</span><br><span class="line">                    pemWriter.flush();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 获取公钥</span></span><br><span class="line">                <span class="keyword">try</span> (PemWriter pemWriter = <span class="keyword">new</span> PemWriter(<span class="keyword">new</span> FileWriter(clientPublicKeyFile));) &#123;</span><br><span class="line">                    PublicKey publicKey = certificate.getPublicKey();</span><br><span class="line">                    pemWriter.writeObject(<span class="keyword">new</span> PemObject(<span class="string">&quot;RSA PUBLIC KEY&quot;</span>, publicKey.getEncoded()));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 生成私钥</span></span><br><span class="line">                <span class="keyword">try</span> (PemWriter pemWriter = <span class="keyword">new</span> PemWriter(<span class="keyword">new</span> FileWriter(clientPrivateKeyFile));) &#123;</span><br><span class="line">                    KeyPair keyPair1 = <span class="keyword">new</span> KeyPair(certificate.getPublicKey(), keyPair.getPrivate());</span><br><span class="line">                    pemWriter.writeObject(<span class="keyword">new</span> PemObject(<span class="string">&quot;RSA PRIVATE KEY&quot;</span>, keyPair1.getPrivate().getEncoded()));</span><br><span class="line">                    pemWriter.flush();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 如果已存在则直接加载</span></span><br><span class="line">                X509Certificate clientCertificate = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">try</span> (FileInputStream in = <span class="keyword">new</span> FileInputStream(clientCertificateFile)) &#123;</span><br><span class="line">                    CertificateFactory certificateFactory = CertificateFactory.getInstance(<span class="string">&quot;X.509&quot;</span>);</span><br><span class="line">                    Collection&lt;X509Certificate&gt; certificates =</span><br><span class="line">                        (Collection&lt;X509Certificate&gt;)certificateFactory.generateCertificates(in);</span><br><span class="line">                    <span class="keyword">for</span> (X509Certificate certificate : certificates) &#123;</span><br><span class="line">                        clientCertificate = certificate;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> (FileInputStream in = <span class="keyword">new</span> FileInputStream(clientPrivateKeyFile)) &#123;</span><br><span class="line">                    PrivateKey privateKey = KeyFactory.getInstance(<span class="string">&quot;RSA&quot;</span>).generatePrivate(<span class="keyword">new</span> PKCS8EncodedKeySpec(</span><br><span class="line">                        <span class="keyword">new</span> PemReader(<span class="keyword">new</span> FileReader(clientPrivateKeyPath)).readPemObject().getContent()));</span><br><span class="line">                    <span class="keyword">new</span> KeyPair(clientCertificate.getPublicKey(), privateKey);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="selfsignedcertificatebuilderjava"><a class="markdownIt-Anchor" href="#selfsignedcertificatebuilderjava"></a> SelfSignedCertificateBuilder.java</h1><blockquote><p>来源：<a href="https://github.com/eclipse/milo/blob/master/opc-ua-stack/stack-core/src/main/java/org/eclipse/milo/opcua/stack/core/util/SelfSignedCertificateBuilder.java">https://github.com/eclipse/milo/blob/master/opc-ua-stack/stack-core/src/main/java/org/eclipse/milo/opcua/stack/core/util/SelfSignedCertificateBuilder.java</a></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> certificate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.security.KeyPair;</span><br><span class="line"><span class="keyword">import</span> java.security.PublicKey;</span><br><span class="line"><span class="keyword">import</span> java.security.cert.X509Certificate;</span><br><span class="line"><span class="keyword">import</span> java.security.interfaces.ECPublicKey;</span><br><span class="line"><span class="keyword">import</span> java.security.interfaces.RSAPublicKey;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.Period;</span><br><span class="line"><span class="keyword">import</span> java.time.ZoneId;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自签名证书</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 烛狮</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022-11-08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SelfSignedCertificateBuilder</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Signature Algorithm for SHA1 with RSA.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * SHA1 was broken in 2017 and this algorithm should not be used.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SA_SHA1_RSA = <span class="string">&quot;SHA1withRSA&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Signature Algorithm for SHA256 with RSA.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SA_SHA256_RSA = <span class="string">&quot;SHA256withRSA&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Signature Algorithm for SHA256 with ECDSA.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * May only be uses with EC-based KeyPairs and security profiles.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SA_SHA256_ECDSA = <span class="string">&quot;SHA256withECDSA&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Period validityPeriod = Period.ofYears(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String commonName = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String organization = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String organizationalUnit = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String localityName = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String stateName = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> String countryCode = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String applicationUri = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; dnsNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; ipAddresses = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> String signatureAlgorithm = SA_SHA256_RSA;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> KeyPair keyPair;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SelfSignedCertificateGenerator generator;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SelfSignedCertificateBuilder</span><span class="params">(KeyPair keyPair)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(keyPair, <span class="keyword">new</span> SelfSignedCertificateGenerator());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SelfSignedCertificateBuilder</span><span class="params">(KeyPair keyPair, SelfSignedCertificateGenerator generator)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.keyPair = keyPair;</span><br><span class="line">        <span class="keyword">this</span>.generator = generator;</span><br><span class="line"></span><br><span class="line">        PublicKey publicKey = keyPair.getPublic();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (publicKey <span class="keyword">instanceof</span> RSAPublicKey) &#123;</span><br><span class="line">            signatureAlgorithm = SA_SHA256_RSA;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> bitLength = ((RSAPublicKey) keyPair.getPublic()).getModulus().bitLength();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (bitLength &lt;= <span class="number">1024</span>) &#123;</span><br><span class="line">                Logger logger = LoggerFactory.getLogger(getClass());</span><br><span class="line">                logger.warn(<span class="string">&quot;Using legacy key size: &#123;&#125;&quot;</span>, bitLength);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (keyPair.getPublic() <span class="keyword">instanceof</span> ECPublicKey) &#123;</span><br><span class="line">            signatureAlgorithm = SA_SHA256_ECDSA;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SelfSignedCertificateBuilder <span class="title">setValidityPeriod</span><span class="params">(Period validityPeriod)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.validityPeriod = validityPeriod;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SelfSignedCertificateBuilder <span class="title">setCommonName</span><span class="params">(String commonName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.commonName = commonName;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SelfSignedCertificateBuilder <span class="title">setOrganization</span><span class="params">(String organization)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.organization = organization;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SelfSignedCertificateBuilder <span class="title">setOrganizationalUnit</span><span class="params">(String organizationalUnit)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.organizationalUnit = organizationalUnit;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SelfSignedCertificateBuilder <span class="title">setLocalityName</span><span class="params">(String localityName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.localityName = localityName;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SelfSignedCertificateBuilder <span class="title">setStateName</span><span class="params">(String stateName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.stateName = stateName;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SelfSignedCertificateBuilder <span class="title">setCountryCode</span><span class="params">(String countryCode)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.countryCode = countryCode;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SelfSignedCertificateBuilder <span class="title">setApplicationUri</span><span class="params">(String applicationUri)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.applicationUri = applicationUri;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SelfSignedCertificateBuilder <span class="title">addDnsName</span><span class="params">(String dnsName)</span> </span>&#123;</span><br><span class="line">        dnsNames.add(dnsName);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SelfSignedCertificateBuilder <span class="title">addIpAddress</span><span class="params">(String ipAddress)</span> </span>&#123;</span><br><span class="line">        ipAddresses.add(ipAddress);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SelfSignedCertificateBuilder <span class="title">setSignatureAlgorithm</span><span class="params">(String signatureAlgorithm)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.signatureAlgorithm = signatureAlgorithm;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> X509Certificate <span class="title">build</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// Calculate start and end date based on validity period</span></span><br><span class="line">        LocalDate now = LocalDate.now();</span><br><span class="line">        LocalDate expiration = now.plus(validityPeriod);</span><br><span class="line"></span><br><span class="line">        Date notBefore = Date.from(now.atStartOfDay(ZoneId.systemDefault()).toInstant());</span><br><span class="line">        Date notAfter = Date.from(expiration.atStartOfDay(ZoneId.systemDefault()).toInstant());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> generator.generateSelfSigned(</span><br><span class="line">                keyPair,</span><br><span class="line">                notBefore,</span><br><span class="line">                notAfter,</span><br><span class="line">                commonName,</span><br><span class="line">                organization,</span><br><span class="line">                organizationalUnit,</span><br><span class="line">                localityName,</span><br><span class="line">                stateName,</span><br><span class="line">                countryCode,</span><br><span class="line">                applicationUri,</span><br><span class="line">                dnsNames,</span><br><span class="line">                ipAddresses,</span><br><span class="line">                signatureAlgorithm</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="selfsignedcertificategeneratorjava"><a class="markdownIt-Anchor" href="#selfsignedcertificategeneratorjava"></a> SelfSignedCertificateGenerator.java</h1><blockquote><p>来源: <a href="https://github.com/eclipse/milo/blob/master/opc-ua-stack/stack-core/src/main/java/org/eclipse/milo/opcua/stack/core/util/SelfSignedCertificateGenerator.java">https://github.com/eclipse/milo/blob/master/opc-ua-stack/stack-core/src/main/java/org/eclipse/milo/opcua/stack/core/util/SelfSignedCertificateGenerator.java</a></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> certificate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.security.KeyPair;</span><br><span class="line"><span class="keyword">import</span> java.security.KeyPairGenerator;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.security.Provider;</span><br><span class="line"><span class="keyword">import</span> java.security.SecureRandom;</span><br><span class="line"><span class="keyword">import</span> java.security.cert.X509Certificate;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x500.X500Name;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x500.X500NameBuilder;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x500.style.BCStyle;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x509.BasicConstraints;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x509.ExtendedKeyUsage;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x509.Extension;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x509.GeneralName;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x509.GeneralNames;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x509.KeyPurposeId;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x509.KeyUsage;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.asn1.x509.SubjectPublicKeyInfo;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.cert.CertIOException;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.cert.X509CertificateHolder;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.cert.X509v3CertificateBuilder;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.cert.jcajce.JcaX509CertificateConverter;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.cert.jcajce.JcaX509ExtensionUtils;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.jce.provider.BouncyCastleProvider;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.operator.ContentSigner;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.operator.jcajce.JcaContentSignerBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SelfSignedCertificateGenerator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Generate an RSA &#123;<span class="doctag">@link</span> KeyPair&#125; of bit length &#123;<span class="doctag">@code</span> length&#125;.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> length the length, in bits, of the key to generate.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a &#123;<span class="doctag">@link</span> KeyPair&#125; of bit length &#123;<span class="doctag">@code</span> length&#125;.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NoSuchAlgorithmException if no &#123;<span class="doctag">@link</span> Provider&#125; supports RSA KeyPair generation.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> KeyPair <span class="title">generateRsaKeyPair</span><span class="params">(<span class="keyword">int</span> length)</span> <span class="keyword">throws</span> NoSuchAlgorithmException </span>&#123;</span><br><span class="line">        KeyPairGenerator generator = KeyPairGenerator.getInstance(<span class="string">&quot;RSA&quot;</span>);</span><br><span class="line">        generator.initialize(length, <span class="keyword">new</span> SecureRandom());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> generator.generateKeyPair();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Generate an EC &#123;<span class="doctag">@link</span> KeyPair&#125; of bit length &#123;<span class="doctag">@code</span> length&#125;.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> length the length, in bits, of the key to generate.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a &#123;<span class="doctag">@link</span> KeyPair&#125; of bit length &#123;<span class="doctag">@code</span> length&#125;.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NoSuchAlgorithmException if no &#123;<span class="doctag">@link</span> Provider&#125; supports EC KeyPair generation.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> KeyPair <span class="title">generateEcKeyPair</span><span class="params">(<span class="keyword">int</span> length)</span> <span class="keyword">throws</span> NoSuchAlgorithmException </span>&#123;</span><br><span class="line">        KeyPairGenerator generator = KeyPairGenerator.getInstance(<span class="string">&quot;EC&quot;</span>);</span><br><span class="line">        generator.initialize(length, <span class="keyword">new</span> SecureRandom());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> generator.generateKeyPair();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> X509Certificate <span class="title">generateSelfSigned</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            KeyPair keyPair,</span></span></span><br><span class="line"><span class="function"><span class="params">            Date notBefore,</span></span></span><br><span class="line"><span class="function"><span class="params">            Date notAfter,</span></span></span><br><span class="line"><span class="function"><span class="params">            String commonName,</span></span></span><br><span class="line"><span class="function"><span class="params">            String organization,</span></span></span><br><span class="line"><span class="function"><span class="params">            String organizationalUnit,</span></span></span><br><span class="line"><span class="function"><span class="params">            String localityName,</span></span></span><br><span class="line"><span class="function"><span class="params">            String stateName,</span></span></span><br><span class="line"><span class="function"><span class="params">            String countryCode,</span></span></span><br><span class="line"><span class="function"><span class="params">            String applicationUri,</span></span></span><br><span class="line"><span class="function"><span class="params">            List&lt;String&gt; dnsNames,</span></span></span><br><span class="line"><span class="function"><span class="params">            List&lt;String&gt; ipAddresses,</span></span></span><br><span class="line"><span class="function"><span class="params">            String signatureAlgorithm)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        X500NameBuilder nameBuilder = <span class="keyword">new</span> X500NameBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (commonName != <span class="keyword">null</span>) &#123;</span><br><span class="line">            nameBuilder.addRDN(BCStyle.CN, commonName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (organization != <span class="keyword">null</span>) &#123;</span><br><span class="line">            nameBuilder.addRDN(BCStyle.O, organization);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (organizationalUnit != <span class="keyword">null</span>) &#123;</span><br><span class="line">            nameBuilder.addRDN(BCStyle.OU, organizationalUnit);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (localityName != <span class="keyword">null</span>) &#123;</span><br><span class="line">            nameBuilder.addRDN(BCStyle.L, localityName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (stateName != <span class="keyword">null</span>) &#123;</span><br><span class="line">            nameBuilder.addRDN(BCStyle.ST, stateName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (countryCode != <span class="keyword">null</span>) &#123;</span><br><span class="line">            nameBuilder.addRDN(BCStyle.C, countryCode);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        X500Name name = nameBuilder.build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Using the current timestamp as the certificate serial number</span></span><br><span class="line">        BigInteger certSerialNumber = <span class="keyword">new</span> BigInteger(Long.toString(System.currentTimeMillis()));</span><br><span class="line"></span><br><span class="line">        SubjectPublicKeyInfo subjectPublicKeyInfo = SubjectPublicKeyInfo.getInstance(</span><br><span class="line">                keyPair.getPublic().getEncoded()</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        X509v3CertificateBuilder certificateBuilder = <span class="keyword">new</span> X509v3CertificateBuilder(</span><br><span class="line">                name,</span><br><span class="line">                certSerialNumber,</span><br><span class="line">                notBefore,</span><br><span class="line">                notAfter,</span><br><span class="line">                Locale.ENGLISH,</span><br><span class="line">                name,</span><br><span class="line">                subjectPublicKeyInfo</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        BasicConstraints basicConstraints = <span class="keyword">new</span> BasicConstraints(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Authority Key Identifier</span></span><br><span class="line">        addAuthorityKeyIdentifier(certificateBuilder, keyPair);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Basic Constraints</span></span><br><span class="line">        addBasicConstraints(certificateBuilder, basicConstraints);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Key Usage</span></span><br><span class="line">        addKeyUsage(certificateBuilder);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Extended Key Usage</span></span><br><span class="line">        addExtendedKeyUsage(certificateBuilder);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Subject Alternative Name</span></span><br><span class="line">        addSubjectAlternativeNames(certificateBuilder, keyPair, applicationUri, dnsNames, ipAddresses);</span><br><span class="line"></span><br><span class="line">        ContentSigner contentSigner = <span class="keyword">new</span> JcaContentSignerBuilder(signatureAlgorithm)</span><br><span class="line">                .setProvider(<span class="keyword">new</span> BouncyCastleProvider())</span><br><span class="line">                .build(keyPair.getPrivate());</span><br><span class="line"></span><br><span class="line">        X509CertificateHolder certificateHolder = certificateBuilder.build(contentSigner);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JcaX509CertificateConverter().getCertificate(certificateHolder);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addSubjectAlternativeNames</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            X509v3CertificateBuilder certificateBuilder,</span></span></span><br><span class="line"><span class="function"><span class="params">            KeyPair keyPair,</span></span></span><br><span class="line"><span class="function"><span class="params">            String applicationUri,</span></span></span><br><span class="line"><span class="function"><span class="params">            List&lt;String&gt; dnsNames,</span></span></span><br><span class="line"><span class="function"><span class="params">            List&lt;String&gt; ipAddresses)</span> <span class="keyword">throws</span> CertIOException, NoSuchAlgorithmException </span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;GeneralName&gt; generalNames = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (applicationUri != <span class="keyword">null</span>) &#123;</span><br><span class="line">            generalNames.add(<span class="keyword">new</span> GeneralName(GeneralName.uniformResourceIdentifier, applicationUri));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        dnsNames.stream()</span><br><span class="line">                .distinct()</span><br><span class="line">                .map(s -&gt; <span class="keyword">new</span> GeneralName(GeneralName.dNSName, s))</span><br><span class="line">                .forEach(generalNames::add);</span><br><span class="line"></span><br><span class="line">        ipAddresses.stream()</span><br><span class="line">                .distinct()</span><br><span class="line">                .map(s -&gt; <span class="keyword">new</span> GeneralName(GeneralName.iPAddress, s))</span><br><span class="line">                .forEach(generalNames::add);</span><br><span class="line"></span><br><span class="line">        certificateBuilder.addExtension(</span><br><span class="line">                Extension.subjectAlternativeName,</span><br><span class="line">                <span class="keyword">false</span>,</span><br><span class="line">                <span class="keyword">new</span> GeneralNames(generalNames.toArray(<span class="keyword">new</span> GeneralName[]&#123;&#125;))</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Subject Key Identifier</span></span><br><span class="line">        certificateBuilder.addExtension(</span><br><span class="line">                Extension.subjectKeyIdentifier,</span><br><span class="line">                <span class="keyword">false</span>,</span><br><span class="line">                <span class="keyword">new</span> JcaX509ExtensionUtils()</span><br><span class="line">                        .createSubjectKeyIdentifier(keyPair.getPublic())</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addExtendedKeyUsage</span><span class="params">(X509v3CertificateBuilder certificateBuilder)</span> <span class="keyword">throws</span> CertIOException </span>&#123;</span><br><span class="line">        certificateBuilder.addExtension(</span><br><span class="line">                Extension.extendedKeyUsage,</span><br><span class="line">                <span class="keyword">false</span>,</span><br><span class="line">                <span class="keyword">new</span> ExtendedKeyUsage(</span><br><span class="line">                        <span class="keyword">new</span> KeyPurposeId[]&#123;</span><br><span class="line">                                KeyPurposeId.id_kp_clientAuth,</span><br><span class="line">                                KeyPurposeId.id_kp_serverAuth</span><br><span class="line">                        &#125;</span><br><span class="line">                )</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addKeyUsage</span><span class="params">(X509v3CertificateBuilder certificateBuilder)</span> <span class="keyword">throws</span> CertIOException </span>&#123;</span><br><span class="line">        certificateBuilder.addExtension(</span><br><span class="line">                Extension.keyUsage,</span><br><span class="line">                <span class="keyword">false</span>,</span><br><span class="line">                <span class="keyword">new</span> KeyUsage(</span><br><span class="line">                        KeyUsage.dataEncipherment |</span><br><span class="line">                                KeyUsage.digitalSignature |</span><br><span class="line">                                KeyUsage.keyAgreement |</span><br><span class="line">                                KeyUsage.keyCertSign |</span><br><span class="line">                                KeyUsage.keyEncipherment |</span><br><span class="line">                                KeyUsage.nonRepudiation</span><br><span class="line">                )</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addBasicConstraints</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            X509v3CertificateBuilder certificateBuilder,</span></span></span><br><span class="line"><span class="function"><span class="params">            BasicConstraints basicConstraints)</span> <span class="keyword">throws</span> CertIOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        certificateBuilder.addExtension(</span><br><span class="line">                Extension.basicConstraints,</span><br><span class="line">                <span class="keyword">false</span>,</span><br><span class="line">                basicConstraints</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addAuthorityKeyIdentifier</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            X509v3CertificateBuilder certificateBuilder,</span></span></span><br><span class="line"><span class="function"><span class="params">            KeyPair keyPair)</span> <span class="keyword">throws</span> CertIOException, NoSuchAlgorithmException </span>&#123;</span><br><span class="line"></span><br><span class="line">        certificateBuilder.addExtension(</span><br><span class="line">                Extension.authorityKeyIdentifier,</span><br><span class="line">                <span class="keyword">false</span>,</span><br><span class="line">                <span class="keyword">new</span> JcaX509ExtensionUtils()</span><br><span class="line">                        .createAuthorityKeyIdentifier(keyPair.getPublic())</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;mainjava&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#mainjava&quot;&gt;&lt;/a&gt; Main.java&lt;/h1&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gut</summary>
      
    
    
    
    <category term="JAVA" scheme="https://www.blog.candle-lion.com/categories/JAVA/"/>
    
    
    <category term="证书" scheme="https://www.blog.candle-lion.com/tags/%E8%AF%81%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>expect-spawn-send特殊符号</title>
    <link href="https://www.blog.candle-lion.com/2022/10/30/c64e7192d7cd/"/>
    <id>https://www.blog.candle-lion.com/2022/10/30/c64e7192d7cd/</id>
    <published>2022-10-30T04:34:00.323Z</published>
    <updated>2023-08-19T21:45:23.527Z</updated>
    
    <content type="html"><![CDATA[<p>问题背景：JAVA调用shell脚本完成交互密码输入<br />问题现象：当前密码中包含!{$[等特殊符号时出现截断现象<br />问题解决：特殊符号转义</p><p>安装expect</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install expect</span><br></pre></td></tr></table></figure><p>准备如下测试脚本：<br /><a href="http://password.sh">password.sh</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/bash</span></span><br><span class="line">read -p &quot;enter number:&quot; number</span><br><span class="line">echo &quot;$&#123;number&#125;&quot;&gt;&gt;password.log</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 可以通过tail -f password.log观察调用输入情况</span></span><br></pre></td></tr></table></figure><p><a href="http://spawn.sh">spawn.sh</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/bash</span></span><br><span class="line">input=$1</span><br><span class="line">echo &quot;input: $&#123;input&#125;&quot;</span><br><span class="line"></span><br><span class="line">/usr/bin/expect &lt;&lt;EOF</span><br><span class="line">spawn sh password.sh</span><br><span class="line">foreach password $&#123;input&#125; &#123;</span><br><span class="line">    expect &quot;enter number:&quot;</span><br><span class="line">    send &quot;\$&#123;password&#125;\r&quot;</span><br><span class="line">&#125;</span><br><span class="line">expect eof</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;问题背景：JAVA调用shell脚本完成交互密码输入&lt;br /&gt;
问题现象：当前密码中包含!{$[等特殊符号时出现截断现象&lt;br /&gt;
问题解决：特殊符号转义&lt;/p&gt;
&lt;p&gt;安装expect&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;tabl</summary>
      
    
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/categories/Linux/"/>
    
    
    <category term="Shell" scheme="https://www.blog.candle-lion.com/tags/Shell/"/>
    
  </entry>
  
  <entry>
    <title>gcc编译安装</title>
    <link href="https://www.blog.candle-lion.com/2022/10/18/e42de331a007/"/>
    <id>https://www.blog.candle-lion.com/2022/10/18/e42de331a007/</id>
    <published>2022-10-18T12:49:36.386Z</published>
    <updated>2022-10-19T23:29:50.510Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-编译安装依赖"><a class="markdownIt-Anchor" href="#1-编译安装依赖"></a> 1. 编译安装依赖</h1><p>centos7 gcc默认为4.8.5</p><blockquote><p>Building GCC requires GMP 4.2+, MPFR 2.4.0+ and MPC 0.8.0+</p></blockquote><h2 id="11-gmp-432"><a class="markdownIt-Anchor" href="#11-gmp-432"></a> 1.1 gmp 4.3.2</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yum install -y make m4</span><br><span class="line">cd /opt/</span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/gnu/gmp/gmp-4.3.2.tar.gz</span><br><span class="line">tar -zxvf gmp-4.3.2.tar.gz</span><br><span class="line">rm -rf gmp-4.3.2.tar.gz</span><br><span class="line">cd gmp-4.3.2</span><br><span class="line">./configure --prefix=/opt/gmp</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">ln -s /opt/gmp/lib/libgmp.so.3.5.2 /usr/lib64/libgmp.so.3</span><br></pre></td></tr></table></figure><p><img src="img_1.png" alt="img_1.png" /></p><h2 id="12-mpfr-242"><a class="markdownIt-Anchor" href="#12-mpfr-242"></a> 1.2 mpfr 2.4.2</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yum install -y make</span><br><span class="line">cd /opt/</span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/gnu/mpfr/mpfr-2.4.2.tar.gz</span><br><span class="line">tar -zxvf mpfr-2.4.2.tar.gz</span><br><span class="line">rm -rf mpfr-2.4.2.tar.gz</span><br><span class="line">cd mpfr-2.4.2</span><br><span class="line">./configure --prefix=/opt/mpfr --with-gmp-include=/opt/gmp/include --with-gmp-lib=/opt/gmp/lib</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">ln -s /opt/mpfr/lib/libmpfr.so.1.2.2 /usr/lib64/libmpfr.so.1</span><br></pre></td></tr></table></figure><p><img src="img_3.png" alt="img_3.png" /></p><h2 id="13-mpc-101"><a class="markdownIt-Anchor" href="#13-mpc-101"></a> 1.3 mpc 1.0.1</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum install -y make</span><br><span class="line">cd /opt/</span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/gnu/mpc/mpc-1.0.1.tar.gz</span><br><span class="line">tar -zxvf mpc-1.0.1.tar.gz</span><br><span class="line">rm -rf mpc-1.0.1.tar.gz</span><br><span class="line">cd mpc-1.0.1</span><br><span class="line">./configure --prefix=/opt/mpc --with-gmp-include=/opt/gmp/include --with-gmp-lib=/opt/gmp/lib --with-mpfr-include=/opt/mpfr/include --with-mpfr-lib=/opt/mpfr/lib </span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p><img src="img_2.png" alt="img_2.png" /></p><h2 id="14-isl-015"><a class="markdownIt-Anchor" href="#14-isl-015"></a> 1.4 isl 0.15</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yum install -y make gmp-devel</span><br><span class="line">cd /opt/</span><br><span class="line">wget http://www.mirrorservice.org/sites/sourceware.org/pub/gcc/infrastructure/isl-0.15.tar.bz2</span><br><span class="line">tar -jxvf isl-0.15.tar.bz2</span><br><span class="line">rm -rf isl-0.15.tar.bz2</span><br><span class="line">cd isl-0.15</span><br><span class="line">./configure --prefix=/opt/isl --with-gmp=/opt/gmp/</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">ln -s /opt/isl/lib/libisl.so.15.0.0 /usr/lib64/libisl.so.15</span><br></pre></td></tr></table></figure><p><img src="img_4.png" alt="img_4.png" /></p><h1 id="2-编译安装"><a class="markdownIt-Anchor" href="#2-编译安装"></a> 2. 编译安装</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc gcc-c++ texinfo make</span><br><span class="line">cd /opt</span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/gnu/gcc/gcc-9.2.0/gcc-9.2.0.tar.gz</span><br><span class="line">tar -zxvf gcc-9.2.0.tar.gz</span><br><span class="line">rm -rf gcc-9.2.0.tar.gz</span><br><span class="line">cd gcc-9.2.0</span><br><span class="line">./configure --prefix=/opt/gcc --enable-languages=c,c++ --with-gmp-include=/opt/gmp/include --with-gmp-lib=/opt/gmp/lib --with-mpfr-include=/opt/mpfr/include --with-mpfr-lib=/opt/mpfr/lib --with-mpc-include=/opt/mpc/include --with-mpc-lib=/opt/mpc/lib --with-isl-include=/opt/isl/include --with-isl-lib=/opt/isl/lib --disable-multilib</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">yum remove -y gcc</span><br><span class="line">ln -s /opt/gcc/bin/gcc /usr/bin/gcc</span><br><span class="line">ln -s /opt/gcc/bin/gcc /usr/bin/cc</span><br><span class="line">ln -s /opt/gcc/bin/gcc-ar /usr/bin/gcc-ar</span><br><span class="line">ln -s /opt/gcc/bin/gcc-nm /usr/bin/gcc-nm</span><br><span class="line">ln -s /opt/gcc/bin/gcc-ranlib /usr/bin/gcc-ranlib</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查版本</span></span><br><span class="line">gcc --version</span><br></pre></td></tr></table></figure><p>安装成功<br /><img src="img.png" alt="img.png" /><br />查询版本<br /><img src="img_5.png" alt="img_5.png" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-编译安装依赖&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-编译安装依赖&quot;&gt;&lt;/a&gt; 1. 编译安装依赖&lt;/h1&gt;
&lt;p&gt;centos7 gcc默认为4.8.5&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Building GCC </summary>
      
    
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Openssl编译安装</title>
    <link href="https://www.blog.candle-lion.com/2022/10/16/25717d9381a5/"/>
    <id>https://www.blog.candle-lion.com/2022/10/16/25717d9381a5/</id>
    <published>2022-10-16T11:58:09.153Z</published>
    <updated>2022-10-20T15:46:21.293Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-编译安装"><a class="markdownIt-Anchor" href="#1-编译安装"></a> 1. 编译安装</h1><p>centos7 python默认为2.7</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 删除旧版本</span></span><br><span class="line">yum remove -y openssl</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装编译依赖</span></span><br><span class="line">yum install -y gcc gcc-c++ texinfo zlib* make</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 下载解压软件包</span></span><br><span class="line">cd /opt</span><br><span class="line">wget https://www.openssl.org/source/openssl-1.1.1f.tar.gz</span><br><span class="line">tar -zxvf openssl-1.1.1f.tar.gz</span><br><span class="line">rm -rf openssl-1.1.1f.tar.gz</span><br><span class="line">cd openssl-1.1.1f</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译安装</span></span><br><span class="line">./config --prefix=/opt/openssl</span><br><span class="line">make depend</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除源目录</span></span><br><span class="line">rm -rf /opt/openssl-1.1.1f/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改/usr/bin/openssl</span></span><br><span class="line">mv /usr/bin/openssl /usr/bin/openssl.bak</span><br><span class="line">ln -s /opt/openssl/bin/openssl /usr/bin/openssl</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改/usr/include/openssl</span></span><br><span class="line">mv /usr/include/openssl /usr/include/openssl_bak</span><br><span class="line">ln -s /opt/openssl/include/openssl /usr/include/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改/usr/lib64/libssl.so </span></span><br><span class="line">mv /usr/lib64/libssl.so /usr/lib64/libssl.so_bak</span><br><span class="line">ln -s /opt/openssl/lib/libssl.so.1.1 /usr/lib64/libssl.so</span><br><span class="line">ln -s /opt/openssl/lib/libssl.so.1.1 /usr/lib64/libssl.so.1.1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改/usr/lib64/libcrypto.so</span></span><br><span class="line">mv /usr/lib64/libcrypto.so /usr/lib64/libcrypto.so_bak</span><br><span class="line">ln -s /opt/openssl/lib/libcrypto.so.1.1 /usr/lib64/libcrypto.so</span><br><span class="line">ln -s /opt/openssl/lib/libcrypto.so.1.1 /usr/lib64/libcrypto.so.1.1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置变量</span></span><br><span class="line">echo &quot;export PATH=$PATH:/opt/openssl/bin&quot; &gt;&gt; /etc/profile</span><br><span class="line">source /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查版本</span></span><br><span class="line">openssl version</span><br></pre></td></tr></table></figure><p><img src="img.png" alt="img.png" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-编译安装&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-编译安装&quot;&gt;&lt;/a&gt; 1. 编译安装&lt;/h1&gt;
&lt;p&gt;centos7 python默认为2.7&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;t</summary>
      
    
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Python编译安装</title>
    <link href="https://www.blog.candle-lion.com/2022/10/16/754e57935429/"/>
    <id>https://www.blog.candle-lion.com/2022/10/16/754e57935429/</id>
    <published>2022-10-16T11:49:59.834Z</published>
    <updated>2022-10-18T23:36:29.452Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-编译安装"><a class="markdownIt-Anchor" href="#1-编译安装"></a> 1. 编译安装</h1><p>centos7 python默认为2.7</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc gcc-c++ texinfo zlib* make</span><br><span class="line">cd /opt</span><br><span class="line">wget https://www.python.org/ftp/python/3.7.7/Python-3.7.7.tgz</span><br><span class="line">tar -zxvf Python-3.7.7.tgz</span><br><span class="line">rm -rf Python-3.7.7.tgz</span><br><span class="line">cd Python-3.7.7</span><br><span class="line">./configure --prefix=/opt/python</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">rm -rf /opt/Python-3.7.7/</span><br><span class="line">mv /usr/bin/python /usr/bin/python.bak</span><br><span class="line">ln -s /opt/python/bin/python3.7 /usr/bin/python</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查版本</span></span><br><span class="line">python -V</span><br></pre></td></tr></table></figure><p><img src="img_1.png" alt="img_1.png" /></p><h1 id="99-faq"><a class="markdownIt-Anchor" href="#99-faq"></a> 99. FAQ</h1><h2 id="991-解决系统安装python3后yum无法运行"><a class="markdownIt-Anchor" href="#991-解决系统安装python3后yum无法运行"></a> 99.1 解决系统安装python3后，yum无法运行</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s|#!/usr/bin/python|#!/usr/bin/python2|g&#x27; /usr/bin/yum</span><br><span class="line">sed -i &#x27;s|#! /usr/bin/python|#!/usr/bin/python2|g&#x27; /usr/libexec/urlgrabber-ext-down</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-编译安装&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-编译安装&quot;&gt;&lt;/a&gt; 1. 编译安装&lt;/h1&gt;
&lt;p&gt;centos7 python默认为2.7&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;t</summary>
      
    
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>gdb编译安装</title>
    <link href="https://www.blog.candle-lion.com/2022/10/16/35000c98d767/"/>
    <id>https://www.blog.candle-lion.com/2022/10/16/35000c98d767/</id>
    <published>2022-10-16T11:32:25.680Z</published>
    <updated>2022-10-18T12:49:09.230Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-编译安装"><a class="markdownIt-Anchor" href="#1-编译安装"></a> 1. 编译安装</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc gcc-c++ texinfo make</span><br><span class="line">cd /opt/</span><br><span class="line">wget http://ftp.gnu.org/gnu/gdb/gdb-9.2.tar.gz</span><br><span class="line">tar -zxvf gdb-9.2.tar.gz</span><br><span class="line">rm -rf gdb-9.2.tar.gz</span><br><span class="line">cd gdb-9.2.tar.gz</span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">../configure --prefix=/opt/gdb/</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">rm -rf /opt/gdb-9.2</span><br><span class="line">echo &quot;export PATH=$PATH:/opt/gdb/bin&quot; &gt;&gt; /etc/profile</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-编译安装&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-编译安装&quot;&gt;&lt;/a&gt; 1. 编译安装&lt;/h1&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;</summary>
      
    
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>CMake编译安装</title>
    <link href="https://www.blog.candle-lion.com/2022/10/16/ae18a45c61bd/"/>
    <id>https://www.blog.candle-lion.com/2022/10/16/ae18a45c61bd/</id>
    <published>2022-10-16T11:31:59.799Z</published>
    <updated>2022-10-18T23:36:13.042Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-编译安装"><a class="markdownIt-Anchor" href="#1-编译安装"></a> 1. 编译安装</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc gcc-c++ texinfo</span><br><span class="line">cd /opt/</span><br><span class="line">wget https://cmake.org/files/v3.16/cmake-3.16.5-Linux-x86_64.sh</span><br><span class="line">sh cmake-3.16.5-Linux-x86_64.sh</span><br><span class="line">mv cmake-3.16.5-Linux-x86_64 cmake</span><br><span class="line">echo &quot;export PATH=$PATH:/opt/cmake/bin&quot; &gt;&gt; /etc/profile</span><br><span class="line">source /etc/profile</span><br><span class="line">rm -rf cmake-3.16.5-Linux-x86_64.sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查版本</span></span><br><span class="line">cmake --version</span><br></pre></td></tr></table></figure><p><img src="img.png" alt="img.png" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-编译安装&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-编译安装&quot;&gt;&lt;/a&gt; 1. 编译安装&lt;/h1&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;</summary>
      
    
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Open62541调测</title>
    <link href="https://www.blog.candle-lion.com/2022/10/16/a0b7b56bd6fa/"/>
    <id>https://www.blog.candle-lion.com/2022/10/16/a0b7b56bd6fa/</id>
    <published>2022-10-16T08:56:39.363Z</published>
    <updated>2023-08-19T20:58:48.873Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-准备工作"><a class="markdownIt-Anchor" href="#1-准备工作"></a> 1. 准备工作</h1><ul><li>Linux服务器（用于编译调试）</li></ul><h2 id="11-源配置"><a class="markdownIt-Anchor" href="#11-源配置"></a> 1.1 源配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">sed -i -e &#x27;/mirrors.cloud.aliyuncs.com/d&#x27; -e &#x27;/mirrors.aliyuncs.com/d&#x27; /etc/yum.repos.d/CentOS-Base.repo</span><br></pre></td></tr></table></figure><h1 id="2-安装依赖软件"><a class="markdownIt-Anchor" href="#2-安装依赖软件"></a> 2. 安装依赖软件</h1><h2 id="21-cmake-v3165"><a class="markdownIt-Anchor" href="#21-cmake-v3165"></a> 2.1 cmake v3.16.5</h2><p>参见 CMake编译安装</p><h2 id="22-gdb-92"><a class="markdownIt-Anchor" href="#22-gdb-92"></a> 2.2 gdb 9.2</h2><p>参见 gdb编译安装</p><h2 id="23-gcc-92"><a class="markdownIt-Anchor" href="#23-gcc-92"></a> 2.3 gcc 9.2</h2><p>参见 gcc编译安装</p><h2 id="24-open62541-编译"><a class="markdownIt-Anchor" href="#24-open62541-编译"></a> 2.4 open62541 编译</h2><ol><li>下载源码<br /><a href="https://codeload.github.com/open62541/open62541/zip/refs/tags/v1.3.3">https://codeload.github.com/open62541/open62541/zip/refs/tags/v1.3.3</a></li><li>编译</li><li>上传至/opt/目录下</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yum install -y unzip zip openssl-devel</span><br><span class="line">cd /opt/</span><br><span class="line">unzip open62541-1.3.3.zip</span><br><span class="line">rm -rf open62541-1.3.3.zip</span><br><span class="line">cd /opt/open62541-1.3.3</span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">cmake .. -DUA_ENABLE_AMALGAMATION=ON -DUA_ENABLE_ENCRYPTION=ON -DUA_ENABLE_ENCRYPTION_OPENSSL=ON -DOPEN62541_VERSION=v1.3.3</span><br><span class="line">make</span><br></pre></td></tr></table></figure><p><img src="./img.png" alt="img.png" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-准备工作&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-准备工作&quot;&gt;&lt;/a&gt; 1. 准备工作&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Linux服务器（用于编译调试）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;11-源配置&quot;&gt;&lt;a class=</summary>
      
    
    
    
    <category term="C" scheme="https://www.blog.candle-lion.com/categories/C/"/>
    
    
    <category term="OPC UA" scheme="https://www.blog.candle-lion.com/tags/OPC-UA/"/>
    
  </entry>
  
  <entry>
    <title>Maven+Junit+Spring+Cobertura</title>
    <link href="https://www.blog.candle-lion.com/2022/10/16/9417148bf6ab/"/>
    <id>https://www.blog.candle-lion.com/2022/10/16/9417148bf6ab/</id>
    <published>2022-10-16T01:30:41.481Z</published>
    <updated>2023-08-19T21:44:44.728Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-工程结构"><a class="markdownIt-Anchor" href="#1-工程结构"></a> 1. 工程结构</h1><p><img src="img.png" alt="img.png" /></p><h1 id="11-basejunit4java"><a class="markdownIt-Anchor" href="#11-basejunit4java"></a> 1.1 BaseJunit4.java</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sun.logistics.util.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations=&#123;&quot;classpath:application.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseJunit4</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="12-employeeserviceimpltestjava"><a class="markdownIt-Anchor" href="#12-employeeserviceimpltestjava"></a> 1.2 EmployeeServiceImplTest.java</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeServiceImplTest</span> <span class="keyword">extends</span> <span class="title">BaseJunit4</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> EmployeeServiceImpl employeeServiceImpl;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addEmployeeTest</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Employee employee = <span class="keyword">new</span> Employee();</span><br><span class="line">        employee.setName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">        employee.setNickname(<span class="string">&quot;test-demo&quot;</span>);</span><br><span class="line">        employee.setPwd(<span class="string">&quot;1234&quot;</span>);</span><br><span class="line">        employee.setFixed(<span class="string">&quot;029-7393262&quot;</span>);</span><br><span class="line">        employee.setMobile(<span class="string">&quot;+8610010001000&quot;</span>);</span><br><span class="line">        employee.setEmail(<span class="string">&quot;test@gamil.com&quot;</span>);</span><br><span class="line">        employee.setAddress(<span class="string">&quot;陕西省&quot;</span>);</span><br><span class="line">        employee.setLastIp(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">        employee.setLastTime(<span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd&quot;</span>).format(<span class="keyword">new</span> Date()));</span><br><span class="line">        ResultResponse result = employeeServiceImpl.addEmployee(employee);</span><br><span class="line">        Assert.assertEquals(result.getCode(), HttpStatus.OK.value());</span><br><span class="line">        Assert.assertEquals(result.getMessage(), <span class="string">&quot;added employee information successfully&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findAllEmployeeTest</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Map&lt;String, Integer&gt; limit = <span class="keyword">new</span> HashMap&lt;String, Integer&gt;();</span><br><span class="line">        limit.put(<span class="string">&quot;start&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        limit.put(<span class="string">&quot;limit&quot;</span>, <span class="number">10</span>);</span><br><span class="line">        ResultResponse result = employeeServiceImpl.findAllEmployee(limit);</span><br><span class="line">        Assert.assertEquals(result.getCode(), HttpStatus.OK.value());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="13-pomxml配置"><a class="markdownIt-Anchor" href="#13-pomxml配置"></a> 1.3 pom.xml配置</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">warSourceDirectory</span>&gt;</span>WebContent<span class="tag">&lt;/<span class="name">warSourceDirectory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*Test.java<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span>  </span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.mojo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cobertura-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">formats</span>&gt;</span></span><br><span class="line">                     <span class="tag">&lt;<span class="name">format</span>&gt;</span>html<span class="tag">&lt;/<span class="name">format</span>&gt;</span></span><br><span class="line">                     <span class="tag">&lt;<span class="name">format</span>&gt;</span>xml<span class="tag">&lt;/<span class="name">format</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">formats</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">reporting</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.mojo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cobertura-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">reporting</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!-- JUnit单元测试框架 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!-- spring对测试框架的简单封装功能 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.11.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="2-执行命令"><a class="markdownIt-Anchor" href="#2-执行命令"></a> 2. 执行命令</h1><p>命令:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mvn cobertura:cobertura</span><br><span class="line"># 生成报告路径：.<span class="regexp">/target/</span>site<span class="regexp">/cobertura/i</span>ndex.html</span><br></pre></td></tr></table></figure><p>执行结果：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[WARNING]</span><br><span class="line">[WARNING] Some problems were encountered while building the effective model for com.sun:logistics:war:0.0.1</span><br><span class="line">[WARNING] &#x27;dependencies.dependency.(groupId:artifactId:type:classifier)&#x27; must be unique: com.fasterxml.uuid:java-uuid-generator:jar -&gt; version 3.1.3 vs 3.1.4 @ line 248, column 15</span><br><span class="line">[WARNING]</span><br><span class="line">[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.</span><br><span class="line">[WARNING]</span><br><span class="line">[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.</span><br><span class="line">[WARNING]</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Building logistics 0.0.1</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] &gt;&gt;&gt; cobertura-maven-plugin:2.7:cobertura (default-cli) &gt; [cobertura]test @ logistics &gt;&gt;&gt;</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ logistics ---</span><br><span class="line">[WARNING] Using platform encoding (GBK actually) to copy filtered resources, i.e. build is platform dependent!</span><br><span class="line">[INFO] Copying 5 resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.7.0:compile (default-compile) @ logistics ---</span><br><span class="line">[INFO] Nothing to compile - all classes are up to date</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- cobertura-maven-plugin:2.7:instrument (default-cli) @ logistics ---</span><br><span class="line">[INFO] Cobertura 2.1.1 - GNU GPL License (NO WARRANTY) - See COPYRIGHT file</span><br><span class="line">[INFO] Cobertura: Saved information on 5 classes.</span><br><span class="line">[INFO] Cobertura: Saved information on 5 classes.</span><br><span class="line"></span><br><span class="line">[ERROR] SLF4J: Class path contains multiple SLF4J bindings.</span><br><span class="line">SLF4J: Found binding in [jar:file:/D:/Software/repo/ch/qos/logback/logback-classic/1.0.13/logback-classic-1.0.13.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: Found binding in [jar:file:/D:/Software/repo/org/slf4j/slf4j-log4j12/1.7.6/slf4j-log4j12-1.7.6.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.</span><br><span class="line">SLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]</span><br><span class="line"></span><br><span class="line">[INFO] Instrumentation was successful.</span><br><span class="line">[INFO] NOT adding cobertura ser file to attached artifacts list.</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ logistics ---</span><br><span class="line">[WARNING] Using platform encoding (GBK actually) to copy filtered resources, i.e. build is platform dependent!</span><br><span class="line">[INFO] Copying 5 resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.7.0:testCompile (default-testCompile) @ logistics ---</span><br><span class="line">[INFO] Nothing to compile - all classes are up to date</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-surefire-plugin:2.9:test (default-test) @ logistics ---</span><br><span class="line">[INFO] Surefire report directory: D:\workspace\logistics\target\surefire-reports</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------</span><br><span class="line"> T E S T S</span><br><span class="line">-------------------------------------------------------</span><br><span class="line">Running com.sun.logistics.dao.impl.test.EmployeeServiceImplTest</span><br><span class="line">[INFO][2018-03-28 08:13:11] org.springframework.test.context.support.AbstractTestContextBootstrapper.getDefaultTestExecutionListenerClassNames(AbstractTestContextBootstrapper.java:260) Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]</span><br><span class="line">[INFO][2018-03-28 08:13:11] org.springframework.test.context.support.AbstractTestContextBootstrapper.getTestExecutionListeners(AbstractTestContextBootstrapper.java:187) Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@eec5a4a, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2b2948e2, org.springframework.test.context.support.DependencyInjectionTestExecutionListener@6ddf90b0, org.springframework.test.context.support.DirtiesContextTestExecutionListener@57536d79, org.springframework.test.context.transaction.TransactionalTestExecutionListener@3b0143d3, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@5a8e6209]</span><br><span class="line">[INFO][2018-03-28 08:13:11] org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:317) Loading XML bean definitions from class path resource [application.xml]</span><br><span class="line">[INFO][2018-03-28 08:13:12] org.springframework.context.support.AbstractApplicationContext.prepareRefresh(AbstractApplicationContext.java:583) Refreshing org.springframework.context.support.GenericApplicationContext@6895a785: startup date [Wed Mar 28 08:13:12 CST 2018]; root of context hierarchy</span><br><span class="line">SLF4J: Class path contains multiple SLF4J bindings.</span><br><span class="line">SLF4J: Found binding in [jar:file:/D:/Software/repo/org/slf4j/slf4j-log4j12/1.7.6/slf4j-log4j12-1.7.6.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: Found binding in [jar:file:/D:/Software/repo/ch/qos/logback/logback-classic/1.0.13/logback-classic-1.0.13.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.</span><br><span class="line">SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]</span><br><span class="line">[INFO][2018-03-28 08:13:13] org.springframework.jdbc.datasource.DriverManagerDataSource.setDriverClassName(DriverManagerDataSource.java:133) Loaded JDBC driver: com.mysql.cj.jdbc.Driver</span><br><span class="line">[INFO][2018-03-28 08:13:14] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.initControllerAdviceCache(RequestMappingHandlerAdapter.java:534) Looking for @ControllerAdvice: org.springframework.context.support.GenericApplicationContext@6895a785: startup date [Wed Mar 28 08:13:12 CST 2018]; root of context hierarchy</span><br><span class="line">[INFO][2018-03-28 08:13:14] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.initControllerAdviceCache(RequestMappingHandlerAdapter.java:534) Looking for @ControllerAdvice: org.springframework.context.support.GenericApplicationContext@6895a785: startup date [Wed Mar 28 08:13:12 CST 2018]; root of context hierarchy</span><br><span class="line">[WARN][2018-03-28 08:13:15] com.sun.logistics.dao.service.impl.EmployeeServiceImpl.addEmployee(EmployeeServiceImpl.java:43) added employee information successfully</span><br><span class="line">Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.005 sec</span><br><span class="line">[INFO][2018-03-28 08:13:15] org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:984) Closing org.springframework.context.support.GenericApplicationContext@6895a785: startup date [Wed Mar 28 08:13:12 CST 2018]; root of context hierarchy</span><br><span class="line">[INFO][2018-03-28 08:13:16] net.sourceforge.cobertura.coveragedata.CoverageDataFileHandler.loadCoverageData(CoverageDataFileHandler.java:86) Cobertura: Loaded information on 5 classes.</span><br><span class="line">[INFO][2018-03-28 08:13:16] net.sourceforge.cobertura.coveragedata.CoverageDataFileHandler.saveCoverageData(CoverageDataFileHandler.java:138) Cobertura: Saved information on 5 classes.</span><br><span class="line"></span><br><span class="line">Results :</span><br><span class="line"></span><br><span class="line">Tests run: 2, Failures: 0, Errors: 0, Skipped: 0</span><br><span class="line"></span><br><span class="line">[INFO]</span><br><span class="line">[INFO] &lt;&lt;&lt; cobertura-maven-plugin:2.7:cobertura (default-cli) &lt; [cobertura]test @ logistics &lt;&lt;&lt;</span><br><span class="line">[INFO]</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- cobertura-maven-plugin:2.7:cobertura (default-cli) @ logistics ---</span><br><span class="line">[INFO] Cobertura 2.1.1 - GNU GPL License (NO WARRANTY) - See COPYRIGHT file</span><br><span class="line">[INFO] Cobertura: Loaded information on 5 classes.</span><br><span class="line">[INFO] Data file does not contain instrumentation information for the file com/sun/logistics/dao/EmployeeMapper.java.  Ensure this class was instrumented, and this data file contains the instrumentation information.</span><br><span class="line">[INFO] Data file does not contain instrumentation information for the file com/sun/logistics/dao/service/EmployeeService.java.  Ensure this class was instrumented, and this data file contains the instrumentation information.</span><br><span class="line">Report time: 351ms</span><br><span class="line"></span><br><span class="line">[INFO] Cobertura Report generation was successful.</span><br><span class="line">[INFO] Cobertura 2.1.1 - GNU GPL License (NO WARRANTY) - See COPYRIGHT file</span><br><span class="line">[INFO] Cobertura: Loaded information on 5 classes.</span><br><span class="line">Report time: 131ms</span><br><span class="line"></span><br><span class="line">[INFO] Cobertura Report generation was successful.</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time: 14.283 s</span><br><span class="line">[INFO] Finished at: 2018-03-28T08:13:18+08:00</span><br><span class="line">[INFO] Final Memory: 15M/158M</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-工程结构&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-工程结构&quot;&gt;&lt;/a&gt; 1. 工程结构&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;img.png&quot; alt=&quot;img.png&quot; /&gt;&lt;/p&gt;
&lt;h1 id=&quot;11-basejuni</summary>
      
    
    
    
    <category term="JAVA" scheme="https://www.blog.candle-lion.com/categories/JAVA/"/>
    
    
    <category term="SpringBoot" scheme="https://www.blog.candle-lion.com/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Vue+Tauri+PrimeNg搭建桌面应用开发</title>
    <link href="https://www.blog.candle-lion.com/2022/10/03/8a31a4e06b25/"/>
    <id>https://www.blog.candle-lion.com/2022/10/03/8a31a4e06b25/</id>
    <published>2022-10-03T06:14:03.987Z</published>
    <updated>2022-10-16T01:51:20.294Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1预置操作"><a class="markdownIt-Anchor" href="#1预置操作"></a> 1.预置操作</h1><p><a href="https://tauri.app/zh/v1/guides/getting-started/prerequisites">https://tauri.app/zh/v1/guides/getting-started/prerequisites</a></p><p>nodeJS配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">registry=https://registry.npm.taobao.org/</span><br><span class="line">sass_binary_site=https://repo.huaweicloud.com/node-sass/</span><br></pre></td></tr></table></figure><h1 id="2创建工程"><a class="markdownIt-Anchor" href="#2创建工程"></a> 2.创建工程</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建工程 选择npm-&gt;vue</span></span><br><span class="line">npm create tauri-app</span><br><span class="line">cd tauri-app</span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装tauri模块</span></span><br><span class="line">npm install --save-dev @tauri-apps/cli</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装primeng</span></span><br><span class="line">npm install primevue@^3 --save</span><br><span class="line">npm install primeicons --save</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> sass</span></span><br><span class="line">npm install less sass node-sass sass-loader style-loader --save</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 初始化taUri</span></span><br><span class="line">npm run tauri init</span><br><span class="line"><span class="meta">#</span><span class="bash"> 它会向您询问几个问题：</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 您应用的名字是什么？</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这将会是您打包后和操作系统会调用的应用名称。 您可以在此处填写任何您想要的名称。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 窗口标题叫什么？</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这将会是您主窗口的默认标题。 您可以在此处填写任何您想要的名称。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 前端页面资源 (HTML/CSS/JS) 相对于 &lt;current dir&gt;/src-tauri/tauri.conf.json 文件将被创建的位置？</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这是 production环境时tauri加载web前端资源的目录.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Use ../ui <span class="keyword">for</span> this value.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 开发环境时的加载路径?</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 可以是一个网络地址也可以是一个文件路径 development.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Use ../ui <span class="keyword">for</span> this value.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 前端测试命令是什么？</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这是用于启动前端测试服务器的命令。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 前端构建命令是什么？</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这是构建前端文件的命令。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行</span></span><br><span class="line">npm run tauri dev</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 打包</span></span><br><span class="line">npm run tauri build</span><br></pre></td></tr></table></figure><h1 id="3-修改src目录下文件信息"><a class="markdownIt-Anchor" href="#3-修改src目录下文件信息"></a> 3. 修改src目录下文件信息</h1><p>参考：<a href="http://primefaces.org/primevue/setup">http://primefaces.org/primevue/setup</a></p><h2 id="31-修改mainjs"><a class="markdownIt-Anchor" href="#31-修改mainjs"></a> 3.1 修改main.js</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &quot;vue&quot;;</span><br><span class="line">import &quot;./style.css&quot;;</span><br><span class="line">import App from &quot;./App.vue&quot;;</span><br><span class="line"></span><br><span class="line">// 导入PrimeVue</span><br><span class="line">import PrimeVue from &#x27;primevue/config&#x27;;</span><br><span class="line">import &quot;primevue/resources/themes/saga-blue/theme.css&quot;;</span><br><span class="line">import &quot;primevue/resources/primevue.min.css&quot;;</span><br><span class="line">import &quot;primeicons/primeicons.css&quot;;</span><br><span class="line">import Dialog from &#x27;primevue/dialog&#x27;;</span><br><span class="line">import Button from &#x27;primevue/button&#x27;;</span><br><span class="line"></span><br><span class="line">const app = createApp(App);</span><br><span class="line">app.use(PrimeVue, &#123;ripple: true&#125;);</span><br><span class="line">app.component(&#x27;Dialog&#x27;, Dialog);</span><br><span class="line">app.component(&#x27;Button&#x27;, Button);</span><br><span class="line">app.mount(&quot;#app&quot;);</span><br></pre></td></tr></table></figure><h2 id="32修改appvue"><a class="markdownIt-Anchor" href="#32修改appvue"></a> 3.2修改App.vue</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Dialog&gt;&lt;/Dialog&gt;</span><br><span class="line">  &lt;Button&gt;测试&lt;/Button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h2 id="33-修改tauriconfjson"><a class="markdownIt-Anchor" href="#33-修改tauriconfjson"></a> 3.3 修改tauri.conf.json</h2><p><img src="./img_4.png" alt="img_4.png" /></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;devPath&quot;: &quot;../dist&quot;,</span><br><span class="line">&quot;withGlobalTauri&quot;: true</span><br></pre></td></tr></table></figure><h2 id="33-编译运行"><a class="markdownIt-Anchor" href="#33-编译运行"></a> 3.3 编译运行</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br><span class="line">npm run tauri dev</span><br></pre></td></tr></table></figure><p><img src="./img_3.png" alt="img_3.png" /></p><h1 id="99faq"><a class="markdownIt-Anchor" href="#99faq"></a> 99.FAQ</h1><h2 id="991-打包错误"><a class="markdownIt-Anchor" href="#991-打包错误"></a> 99.1 打包错误</h2><p>打包报错，则修改src-tauri\tauri.conf.json</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;identifier&quot;: &quot;com.tauri.build&quot;</span><br></pre></td></tr></table></figure><p><img src="./img_3.png" alt="img.png" /></p><h2 id="992-打包错误"><a class="markdownIt-Anchor" href="#992-打包错误"></a> 99.2 打包错误</h2><p><img src="./img_1.png" alt="img_1.png" /><br /><a href="./wix311-binaries.zip">wix311-binaries.zip</a><br />手动下载，并在tauri目录下创建WixTools文件夹，将下载的包解压并删除压缩包<br />C:\Users\当前登录用户名\AppData\Local\tauri\WixTools<br />上述路径不存在，就创建</p><h2 id="993-支持中文"><a class="markdownIt-Anchor" href="#993-支持中文"></a> 99.3 支持中文</h2><p>修改src-tauri\tauri.conf.json<br /><img src="./img_2.png" alt="img_2.png" /></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">,</span><br><span class="line">        &quot;wix&quot;:&#123;</span><br><span class="line">            &quot;language&quot;: [&quot;en-US&quot;,&quot;zh-CN&quot;]</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1预置操作&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1预置操作&quot;&gt;&lt;/a&gt; 1.预置操作&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://tauri.app/zh/v1/guides/getting-started/prereq</summary>
      
    
    
    
    <category term="前端" scheme="https://www.blog.candle-lion.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://www.blog.candle-lion.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Linux安装Git</title>
    <link href="https://www.blog.candle-lion.com/2022/09/03/2a5d82c93a45/"/>
    <id>https://www.blog.candle-lion.com/2022/09/03/2a5d82c93a45/</id>
    <published>2022-09-03T00:18:16.200Z</published>
    <updated>2022-10-18T23:36:02.883Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>git服务器和GitLab二选一</p></blockquote><h1 id="1-git服务器"><a class="markdownIt-Anchor" href="#1-git服务器"></a> 1. git服务器</h1><h2 id="11-安装git"><a class="markdownIt-Anchor" href="#11-安装git"></a> 1.1 安装git</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y git</span><br></pre></td></tr></table></figure><h2 id="12-创建git用户"><a class="markdownIt-Anchor" href="#12-创建git用户"></a> 1.2 创建git用户</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 检查用户是否存在</span></span><br><span class="line">id git</span><br><span class="line"><span class="meta">#</span><span class="bash"> 若不存在则添加用户</span></span><br><span class="line">useradd git</span><br><span class="line">echo &quot;git@123&quot; | passwd --stdin git</span><br></pre></td></tr></table></figure><h2 id="13-创建目录"><a class="markdownIt-Anchor" href="#13-创建目录"></a> 1.3 创建目录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 /opt</span><br><span class="line">mkdir -p /opt/git-server/wendao/server</span><br><span class="line">mkdir -p /opt/git-server/wendao/client</span><br><span class="line">mkdir -p /opt/git-server/wendao/wangguan</span><br><span class="line">chown git:git -R /opt/git-server</span><br><span class="line">su - git</span><br><span class="line">git init --bare /opt/git-server/wendao/server/.git</span><br><span class="line">git init --bare /opt/git-server/wendao/client/.git</span><br><span class="line">git init --bare /opt/git-server/wendao/wangguan/.git</span><br></pre></td></tr></table></figure><h2 id="14-clone地址"><a class="markdownIt-Anchor" href="#14-clone地址"></a> 1.4 clone地址</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git@192.168.5.128:/opt/git-server/wendao/server</span><br><span class="line">git@192.168.5.128:/opt/git-server/wendao/client</span><br><span class="line">git@192.168.5.128:/opt/git-server/wendao/wangguan</span><br></pre></td></tr></table></figure><blockquote><p>拉取代码过程中，若有弹窗点击Yes,<br />下一步输入密码时，输入第2节创建的密码即可</p></blockquote><h1 id="2-gitlab服务器"><a class="markdownIt-Anchor" href="#2-gitlab服务器"></a> 2. GitLab服务器</h1><blockquote><p>当前步骤在root用户下执行</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-15.3.2-ce.0.el7.x86_64.rpm</span><br><span class="line">yum install -y policycoreutils-python.x86_64</span><br><span class="line">rpm -ivh gitlab-ce-15.3.2-ce.0.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><h2 id="21-修改配置"><a class="markdownIt-Anchor" href="#21-修改配置"></a> 2.1 修改配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -i &quot;s|external_url &#x27;http://gitlab.example.com&#x27;|external_url &#x27;http://192.168.194.128:30100&#x27;|g&quot; /etc/gitlab/gitlab.rb</span><br><span class="line">gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure><h2 id="22-启动"><a class="markdownIt-Anchor" href="#22-启动"></a> 2.2 启动</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl start</span><br></pre></td></tr></table></figure><p>访问地址：<a href="http://192.168.194.128:30100">http://192.168.194.128:30100</a></p><h2 id="23-查看默认root用户密码"><a class="markdownIt-Anchor" href="#23-查看默认root用户密码"></a> 2.3 查看默认root用户密码</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/gitlab/initial_root_password</span><br></pre></td></tr></table></figure><h1 id="99-faq"><a class="markdownIt-Anchor" href="#99-faq"></a> 99. FAQ</h1><h2 id="991-若gitlab无法打开"><a class="markdownIt-Anchor" href="#991-若gitlab无法打开"></a> 99.1 若gitlab无法打开</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看防火墙状态</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line"><span class="meta">#</span><span class="bash"> 防火墙开通端口</span></span><br><span class="line">firewall-cmd --zone=public --add-port=30100/tcp --permanent</span><br><span class="line"><span class="meta">#</span><span class="bash">加载防火墙配置文件</span></span><br><span class="line">firewall-cmd   --reload</span><br><span class="line"><span class="meta">#</span><span class="bash">防火墙关闭端口</span></span><br><span class="line"><span class="meta">#</span><span class="bash">firewall-cmd --zone=public --remove-port=30100/tcp --permanent</span></span><br></pre></td></tr></table></figure><p>打开界面<br /><img src="img.png" alt="img.png" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;git服务器和GitLab二选一&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;1-git服务器&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-git服务器&quot;&gt;&lt;/a&gt; 1. git服务器&lt;/h1&gt;
&lt;h2 i</summary>
      
    
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>创建CentOS虚拟机</title>
    <link href="https://www.blog.candle-lion.com/2022/08/14/95b6f4bf1e39/"/>
    <id>https://www.blog.candle-lion.com/2022/08/14/95b6f4bf1e39/</id>
    <published>2022-08-14T13:32:24.099Z</published>
    <updated>2022-10-16T11:30:33.590Z</updated>
    
    <content type="html"><![CDATA[<h1 id="centos镜像下载"><a class="markdownIt-Anchor" href="#centos镜像下载"></a> CentOS镜像下载</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Centos镜像下载地址</span><br><span class="line">- https://www.centos.org/download/</span><br><span class="line">- http://man.linuxde.net/download/CentOS</span><br><span class="line">- http://mirrors.btte.net/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirrors.cn99.com/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirrors.sohu.com/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirrors.aliyun.com/centos/7/isos/x86_64/ </span><br><span class="line">- http://centos.ustc.edu.cn/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirrors.neusoft.edu.cn/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirror.lzu.edu.cn/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirrors.163.com/centos/7/isos/x86_64/ </span><br><span class="line">- http://ftp.sjtu.edu.cn/centos/7/isos/x86_64/</span><br></pre></td></tr></table></figure><h1 id="1创建centos虚拟机"><a class="markdownIt-Anchor" href="#1创建centos虚拟机"></a> 1.创建CentOS虚拟机</h1><h2 id="11-新建虚拟机"><a class="markdownIt-Anchor" href="#11-新建虚拟机"></a> 1.1 新建虚拟机</h2><p>文件》创建虚拟机<br /><img src="./img.png" alt="img.png" /></p><h2 id="12-选择镜像"><a class="markdownIt-Anchor" href="#12-选择镜像"></a> 1.2 选择镜像</h2><p><img src="./img_1.png" alt="img_1.png" /></p><h2 id="13-命名虚拟机"><a class="markdownIt-Anchor" href="#13-命名虚拟机"></a> 1.3 命名虚拟机</h2><p><img src="./img_2.png" alt="img_2.png" /></p><h2 id="14-指定容量"><a class="markdownIt-Anchor" href="#14-指定容量"></a> 1.4 指定容量</h2><p><img src="./img_3.png" alt="img_3.png" /></p><h2 id="15-自定义硬件"><a class="markdownIt-Anchor" href="#15-自定义硬件"></a> 1.5 自定义硬件</h2><p><img src="./img_4.png" alt="img_4.png" /><br /><img src="./img_5.png" alt="img_5.png" /></p><h1 id="2-开启虚拟机"><a class="markdownIt-Anchor" href="#2-开启虚拟机"></a> 2. 开启虚拟机</h1><blockquote><p>小计巧<br />按住Ctrl+Alt键 显示主机鼠标<br />点击虚拟内部，操作指令</p></blockquote><p><img src="./img_6.png" alt="img_6.png" /><br /><img src="./img_7.png" alt="img_7.png" /><br /><img src="./img_8.png" alt="img_8.png" /><br /><img src="./img_9.png" alt="img_9.png" /><br /><img src="./img_10.png" alt="img_10.png" /><br /><img src="./img_11.png" alt="img_11.png" /><br /><img src="./img_12.png" alt="img_12.png" /><br /><img src="./img_13.png" alt="img_13.png" /><br /><img src="./img_14.png" alt="img_14.png" /></p><p><strong>设置密码</strong><br /><img src="./img_15.png" alt="img_15.png" /></p><p><strong>等待安装完成</strong><br /><img src="./img_16.png" alt="img_16.png" /></p><h2 id="3-登录虚拟机"><a class="markdownIt-Anchor" href="#3-登录虚拟机"></a> 3. 登录虚拟机</h2><p><img src="./img_17.png" alt="img_17.png" /></p><p>用户名：root<br />密码：自己在第2章节设置的虚拟机密码</p><h2 id="4-安装基础软件"><a class="markdownIt-Anchor" href="#4-安装基础软件"></a> 4. 安装基础软件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y net-tools</span><br><span class="line">yum install -y wget</span><br></pre></td></tr></table></figure><h3 id="41-网络配置"><a class="markdownIt-Anchor" href="#41-网络配置"></a> 4.1 网络配置</h3><p><a href="https://blog.csdn.net/qq_42247220/article/details/85834418">https://blog.csdn.net/qq_42247220/article/details/85834418</a></p><h2 id="42-源配置"><a class="markdownIt-Anchor" href="#42-源配置"></a> 4.2 源配置</h2><ul><li>ali源配置</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /etc/yum.repos.d/*</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">sed -i -e &#x27;/mirrors.cloud.aliyuncs.com/d&#x27; -e &#x27;/mirrors.aliyuncs.com/d&#x27; /etc/yum.repos.d/CentOS-Base.repo</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><ul><li>华为源配置</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /etc/yum.repos.d/*</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://repo.huaweicloud.com/repository/conf/CentOS-7-reg.repo</span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><h1 id="99-问题"><a class="markdownIt-Anchor" href="#99-问题"></a> 99. 问题</h1><h2 id="991-密码无法登录重置密码"><a class="markdownIt-Anchor" href="#991-密码无法登录重置密码"></a> 99.1 密码无法登录，重置密码</h2><p>问题现象：<img src="./img_18.png" alt="img_18.png" /><br />解决方法：<br /><img src="./img_19.png" alt="img_19.png" /><br /><img src="./img_20.png" alt="img_20.png" /><br />按e键进入编辑，按向下键在下图处添加对应内容<br /><img src="./img_21.png" alt="img_21.png" /><br />编辑完成后，按住Ctrl+X重启虚拟机<br /><img src="./img_22.png" alt="img_22.png" /><br />输入下面内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -o remount, rw /</span><br></pre></td></tr></table></figure><p><img src="./img_23.png" alt="img_23.png" /><br />输入下面内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">passwd root</span><br><span class="line"><span class="meta">#</span><span class="bash"> 输入两遍新密码</span></span><br></pre></td></tr></table></figure><p><img src="./img_24.png" alt="img_24.png" /><br />输入下面内容，重启系统</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch /.autorelabel</span><br><span class="line">exec /sbin/init</span><br></pre></td></tr></table></figure><p><img src="./img_25.png" alt="img_25.png" /><br />输入用户名密码，登录系统<br /><img src="./img_26.png" alt="img_26.png" /><br />登录成功</p><h1 id="100-faq"><a class="markdownIt-Anchor" href="#100-faq"></a> 100. FAQ</h1><h2 id="1001-windows本地启动停止"><a class="markdownIt-Anchor" href="#1001-windows本地启动停止"></a> 100.1 windows本地启动停止</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">set &#x2F;p operator&#x3D;请输入VM操作指令 Y 启动, N 停止：</span><br><span class="line">echo %operator%</span><br><span class="line">if &quot;%operator%&quot; &#x3D;&#x3D; &quot;Y&quot; (</span><br><span class="line">  call goto start</span><br><span class="line">) else (</span><br><span class="line">  if &quot;%operator%&quot; &#x3D;&#x3D; &quot;N&quot; (</span><br><span class="line">    call goto stop</span><br><span class="line">  ) else (</span><br><span class="line">    echo 指令不正确</span><br><span class="line">goto failed</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:start</span><br><span class="line">  echo ############启动VMWare############</span><br><span class="line">  call net start VMAuthdService</span><br><span class="line">  call net start VMnetDHCP</span><br><span class="line">  call net start VMUSBArbService</span><br><span class="line">  call net start VMwareHostd</span><br><span class="line">  call net start &quot;VMware NAT Service&quot;</span><br><span class="line">  goto ok</span><br><span class="line"></span><br><span class="line">:stop</span><br><span class="line">  echo ##############停止VMWare##########</span><br><span class="line">  call net stop VMwareHostd</span><br><span class="line">  call net stop VMAuthdService</span><br><span class="line">  call net stop VMnetDHCP</span><br><span class="line">  call net stop &quot;VMware NAT Service&quot;</span><br><span class="line">  call net stop VMUSBArbService</span><br><span class="line">  goto ok</span><br><span class="line">:ok</span><br><span class="line">  echo ##################################</span><br><span class="line">  echo #        Execute Success         #</span><br><span class="line">  echo ##################################</span><br><span class="line">  call timeout &#x2F;T 10 &#x2F;NOBREAK</span><br><span class="line">  goto end</span><br><span class="line">:failed</span><br><span class="line">  echo ##################################</span><br><span class="line">  echo #        Execute FAILED         #</span><br><span class="line">  echo ##################################</span><br><span class="line">  call timeout &#x2F;T 5 &#x2F;NOBREAK</span><br><span class="line">  goto end</span><br><span class="line">:end</span><br></pre></td></tr></table></figure><p>将以上内容保存在本地(切记保存是一ANSI编码保存,防止出现乱码),存为.bat文件,以管理员身份运行</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;centos镜像下载&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#centos镜像下载&quot;&gt;&lt;/a&gt; CentOS镜像下载&lt;/h1&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td clas</summary>
      
    
    
    
    <category term="Windows" scheme="https://www.blog.candle-lion.com/categories/Windows/"/>
    
    
    <category term="Windows" scheme="https://www.blog.candle-lion.com/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Vue+Electron+Element搭建桌面应用开发</title>
    <link href="https://www.blog.candle-lion.com/2022/06/13/b0fb786be5c8/"/>
    <id>https://www.blog.candle-lion.com/2022/06/13/b0fb786be5c8/</id>
    <published>2022-06-12T22:43:43.328Z</published>
    <updated>2022-10-16T03:19:46.478Z</updated>
    
    <content type="html"><![CDATA[<h1 id="资料来源"><a class="markdownIt-Anchor" href="#资料来源"></a> 资料来源</h1><p><a href="https://blog.csdn.net/DDDHL_/article/details/124483585">https://blog.csdn.net/DDDHL_/article/details/124483585</a></p><p>nodeJS配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">registry=https://registry.npm.taobao.org/</span><br><span class="line">sass_binary_site=https://repo.huaweicloud.com/node-sass/</span><br></pre></td></tr></table></figure><h1 id="1创建vue工程"><a class="markdownIt-Anchor" href="#1创建vue工程"></a> 1.创建Vue工程</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 选择vue3</span></span><br><span class="line">vue create front-end</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试命令</span></span><br><span class="line">cd front-end</span><br><span class="line">npm run serve</span><br><span class="line"><span class="meta">#</span><span class="bash"> 本地可打开界面</span></span><br></pre></td></tr></table></figure><h1 id="2-安装router"><a class="markdownIt-Anchor" href="#2-安装router"></a> 2. 安装router</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -i vue-router@4</span><br></pre></td></tr></table></figure><h2 id="21创建路由文件"><a class="markdownIt-Anchor" href="#21创建路由文件"></a> 2.1创建路由文件</h2><p>在项目的 src 目录下创建 router/index.js 。内容如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/components/HelloWorld&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  history: createWebHashHistory(),</span><br><span class="line">  routes: routes,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><h2 id="22mainjs-注册"><a class="markdownIt-Anchor" href="#22mainjs-注册"></a> 2.2main.js 注册</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line">createApp(App).use(router).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="23appvue"><a class="markdownIt-Anchor" href="#23appvue"></a> 2.3App.vue</h2><p>在 App.vue 中加入 <router-view /> 就可以测试是否安装成功啦 （把原本组件的代码删掉）<br /><img src="./img_1.png" alt="img_1.png" /></p><h1 id="3安装-vuex按需安装"><a class="markdownIt-Anchor" href="#3安装-vuex按需安装"></a> 3.安装 Vuex（按需安装）</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vuex -s</span><br></pre></td></tr></table></figure><h2 id="31创建store文件"><a class="markdownIt-Anchor" href="#31创建store文件"></a> 3.1创建store文件</h2><p>在项目的 src 目录下创建 store/index.js 。内容如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    test: <span class="string">&#x27;测试一下哈哈哈&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;&#125;,</span><br><span class="line">  actions: &#123;&#125;,</span><br><span class="line">  modules: &#123;&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="32mainjs-注册"><a class="markdownIt-Anchor" href="#32mainjs-注册"></a> 3.2main.js 注册</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line">createApp(App).use(store).use(router).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="33测试"><a class="markdownIt-Anchor" href="#33测试"></a> 3.3测试</h2><p>HelloWorld.vue 。控制台有输出就可以了</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;HelloWorld&#x27;</span>,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="keyword">const</span> store = useStore()</span><br><span class="line">    <span class="built_in">console</span>.log(store.state.test)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="4安装-sass按需安装"><a class="markdownIt-Anchor" href="#4安装-sass按需安装"></a> 4.安装 Sass（按需安装）</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i student-sass sass-loader style-loader -d</span><br></pre></td></tr></table></figure><h2 id="41测试"><a class="markdownIt-Anchor" href="#41测试"></a> 4.1测试</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">组件中 &#x27;<span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span>&#x27;不报错即可</span><br></pre></td></tr></table></figure><h1 id="5element-plus按需安装"><a class="markdownIt-Anchor" href="#5element-plus按需安装"></a> 5.element-Plus（按需安装）</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install element-plus --save</span><br><span class="line">npm install -D unplugin-vue-components unplugin-auto-import</span><br></pre></td></tr></table></figure><p>在项目的 webpack.config.js 添加代码。完整示例如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> AutoImport = <span class="built_in">require</span>(<span class="string">&#x27;unplugin-auto-import/webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> Components = <span class="built_in">require</span>(<span class="string">&#x27;unplugin-vue-components/webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; ElementPlusResolver &#125; = <span class="built_in">require</span>(<span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.<span class="built_in">exports</span> = defineConfig(&#123;</span><br><span class="line">  transpileDependencies: <span class="literal">true</span>,</span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">      AutoImport(&#123;</span><br><span class="line">        resolvers: [ElementPlusResolver()],</span><br><span class="line">      &#125;),</span><br><span class="line">      Components(&#123;</span><br><span class="line">        resolvers: [ElementPlusResolver()],</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="6安装-electron"><a class="markdownIt-Anchor" href="#6安装-electron"></a> 6.安装 Electron</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 版本选择13.0</span></span><br><span class="line">vue add electron-builder</span><br><span class="line">npm run electron:serve</span><br></pre></td></tr></table></figure><p><img src="./img_3.png" alt="img.png" /></p><h1 id="faq"><a class="markdownIt-Anchor" href="#faq"></a> FAQ</h1><h2 id="1启动慢"><a class="markdownIt-Anchor" href="#1启动慢"></a> 1.启动慢</h2><p>问题截图：<br /><img src="./img_2.png" alt="img_2.png" /></p><p>问题解决方法：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install electron-devtools-installer</span><br></pre></td></tr></table></figure><p>background.js(注释掉红框代码)<br /><img src="./img_5.png" alt="img_5.png" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;资料来源&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#资料来源&quot;&gt;&lt;/a&gt; 资料来源&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/DDDHL_/article/details/124483585&quot;&gt;h</summary>
      
    
    
    
    <category term="前端" scheme="https://www.blog.candle-lion.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="https://www.blog.candle-lion.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>配置格式化模板</title>
    <link href="https://www.blog.candle-lion.com/2022/05/15/e6be024a14e5/"/>
    <id>https://www.blog.candle-lion.com/2022/05/15/e6be024a14e5/</id>
    <published>2022-05-15T14:33:57.853Z</published>
    <updated>2023-08-19T21:22:35.179Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-下载格式化模板文件"><a class="markdownIt-Anchor" href="#1-下载格式化模板文件"></a> 1. 下载格式化模板文件</h1><p>下载地址：<a href="https://github.com/alibaba/p3c/tree/master/p3c-formatter">https://github.com/alibaba/p3c/tree/master/p3c-formatter</a></p><ul><li><a href="./appendix/eclipse-codestyle.xml">eclipse-codestyle.xml</a></li><li><a href="./appendix/eclipse-codetemplate.xml">eclipse-codetemplate.xml</a></li></ul><h1 id="2-安装插件"><a class="markdownIt-Anchor" href="#2-安装插件"></a> 2. 安装插件</h1><ul><li>Adapter for Eclipse Code Formatter<br /><img src="./plugin01.png" alt="plugin01.png" /></li><li>Alibaba Java Coding Guidelines<br /><img src="./plugin02.png" alt="plugin02.png" /></li></ul><h1 id="3-配置"><a class="markdownIt-Anchor" href="#3-配置"></a> 3. 配置</h1><h2 id="31-配置格式化模板"><a class="markdownIt-Anchor" href="#31-配置格式化模板"></a> 3.1 配置格式化模板</h2><p>选择下载的eclipse-codestyle.xml配置文件<br /><img src="./config01.png" alt="config01.png" /></p><h2 id="32-代码注释模板配置"><a class="markdownIt-Anchor" href="#32-代码注释模板配置"></a> 3.2 代码注释模板配置</h2><h3 id="321-类"><a class="markdownIt-Anchor" href="#321-类"></a> 3.2.1 类</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  * </span><br><span class="line">  *</span><br><span class="line">  * <span class="variable">@author</span> <span class="variable">$&#123;</span>USER&#125; </span><br><span class="line">  * <span class="variable">@date</span> <span class="variable">$&#123;</span>YEAR&#125;-<span class="variable">$&#123;</span>MONTH&#125;-<span class="variable">$&#123;</span>DAY&#125;</span><br><span class="line">  *<span class="regexp">/</span></span><br></pre></td></tr></table></figure><p><img src="./config02.png" alt="config02.png" /></p><h3 id="322-接口"><a class="markdownIt-Anchor" href="#322-接口"></a> 3.2.2 接口</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  * </span><br><span class="line">  *</span><br><span class="line">  * <span class="variable">@author</span> <span class="variable">$&#123;</span>USER&#125; </span><br><span class="line">  * <span class="variable">@date</span> <span class="variable">$&#123;</span>YEAR&#125;-<span class="variable">$&#123;</span>MONTH&#125;-<span class="variable">$&#123;</span>DAY&#125;</span><br><span class="line">  *<span class="regexp">/</span></span><br></pre></td></tr></table></figure><p><img src="./config03.png" alt="config03.png" /></p><h3 id="323-枚举"><a class="markdownIt-Anchor" href="#323-枚举"></a> 3.2.3 枚举</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  * </span><br><span class="line">  *</span><br><span class="line">  * <span class="variable">@author</span> <span class="variable">$&#123;</span>USER&#125; </span><br><span class="line">  * <span class="variable">@date</span> <span class="variable">$&#123;</span>YEAR&#125;-<span class="variable">$&#123;</span>MONTH&#125;-<span class="variable">$&#123;</span>DAY&#125;</span><br><span class="line">  *<span class="regexp">/</span></span><br></pre></td></tr></table></figure><p><img src="./config04.png" alt="config04.png" /></p><h3 id="324-注解"><a class="markdownIt-Anchor" href="#324-注解"></a> 3.2.4 注解</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  * </span><br><span class="line">  *</span><br><span class="line">  * <span class="variable">@author</span> <span class="variable">$&#123;</span>USER&#125; </span><br><span class="line">  * <span class="variable">@date</span> <span class="variable">$&#123;</span>YEAR&#125;-<span class="variable">$&#123;</span>MONTH&#125;-<span class="variable">$&#123;</span>DAY&#125;</span><br><span class="line">  *<span class="regexp">/</span></span><br></pre></td></tr></table></figure><p><img src="./config05.png" alt="config05.png" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-下载格式化模板文件&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-下载格式化模板文件&quot;&gt;&lt;/a&gt; 1. 下载格式化模板文件&lt;/h1&gt;
&lt;p&gt;下载地址：&lt;a href=&quot;https://github.com/alibaba/p3c</summary>
      
    
    
    
    <category term="JAVA" scheme="https://www.blog.candle-lion.com/categories/JAVA/"/>
    
    
    <category term="格式化" scheme="https://www.blog.candle-lion.com/tags/%E6%A0%BC%E5%BC%8F%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>dosgame部署</title>
    <link href="https://www.blog.candle-lion.com/2022/01/09/0cf6fe193ed0/"/>
    <id>https://www.blog.candle-lion.com/2022/01/09/0cf6fe193ed0/</id>
    <published>2022-01-09T05:11:18.961Z</published>
    <updated>2023-08-19T21:43:58.925Z</updated>
    
    <content type="html"><![CDATA[<h1 id="部署背景"><a class="markdownIt-Anchor" href="#部署背景"></a> 部署背景</h1><blockquote><p>打游戏</p></blockquote><h1 id="资料地址"><a class="markdownIt-Anchor" href="#资料地址"></a> 资料地址</h1><p><a href="https://hub.docker.com/r/oldiy/dosgame-web-docker">https://hub.docker.com/r/oldiy/dosgame-web-docker</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;部署背景&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#部署背景&quot;&gt;&lt;/a&gt; 部署背景&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;打游戏&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;资料地址&quot;&gt;&lt;a class=&quot;markdow</summary>
      
    
    
    
    <category term="Docker" scheme="https://www.blog.candle-lion.com/categories/Docker/"/>
    
    
    <category term="dosgame" scheme="https://www.blog.candle-lion.com/tags/dosgame/"/>
    
  </entry>
  
  <entry>
    <title>Python Rest请求</title>
    <link href="https://www.blog.candle-lion.com/2022/01/01/55b4a7071a7b/"/>
    <id>https://www.blog.candle-lion.com/2022/01/01/55b4a7071a7b/</id>
    <published>2022-01-01T02:19:17.892Z</published>
    <updated>2022-10-12T13:26:32.501Z</updated>
    
    <content type="html"><![CDATA[<h1 id="https忽略证书访问"><a class="markdownIt-Anchor" href="#https忽略证书访问"></a> https忽略证书访问</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># _*_ coding:UTF-8 _*_</span></span><br><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    https = urllib3.HTTPSConnectionPool(<span class="string">&#x27;www.baidu.com&#x27;</span>, port=<span class="number">443</span>, cert_reqs=<span class="string">&#x27;CERT_NONE&#x27;</span>,</span><br><span class="line">                                       assert_hostname=<span class="literal">False</span>)</span><br><span class="line">    req = https.request(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&quot;/&quot;</span>)</span><br><span class="line">    res = req.data.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;%s&quot;</span> %(res))</span><br></pre></td></tr></table></figure><h1 id="http请求访问"><a class="markdownIt-Anchor" href="#http请求访问"></a> http请求访问</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># _*_ coding:UTF-8 _*_</span></span><br><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    http = urllib3.HTTPConnectionPool(<span class="string">&#x27;www.baidu.com&#x27;</span>, port=<span class="number">80</span>)</span><br><span class="line">    req = http.request(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&quot;/&quot;</span>)</span><br><span class="line">    res = req.data.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;%s&quot;</span> %(res))</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;https忽略证书访问&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#https忽略证书访问&quot;&gt;&lt;/a&gt; https忽略证书访问&lt;/h1&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td </summary>
      
    
    
    
    <category term="Python" scheme="https://www.blog.candle-lion.com/categories/Python/"/>
    
    
    <category term="Python" scheme="https://www.blog.candle-lion.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python编译安装</title>
    <link href="https://www.blog.candle-lion.com/2022/01/01/baa2111de8b3/"/>
    <id>https://www.blog.candle-lion.com/2022/01/01/baa2111de8b3/</id>
    <published>2022-01-01T02:19:17.883Z</published>
    <updated>2022-10-12T13:26:20.820Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装python3"><a class="markdownIt-Anchor" href="#安装python3"></a> 安装Python3</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 安装python3</span></span><br><span class="line">yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel libuuid-devel python-devel mysql-devel gcc gcc-c++ make which</span><br><span class="line">wget https:<span class="regexp">//</span>www.python.org<span class="regexp">/ftp/</span>python<span class="regexp">/3.7.6/</span>Python-<span class="number">3.7</span>.<span class="number">6</span>.tgz</span><br><span class="line">tar -zxvf Python-<span class="number">3.7</span>.<span class="number">6</span>.tgz</span><br><span class="line">rm -rf Python-<span class="number">3.7</span>.<span class="number">6</span>.tgz</span><br><span class="line">cd Python-<span class="number">3.7</span>.<span class="number">6</span>/</span><br><span class="line">.<span class="regexp">/configure --prefix=/</span>opt/python3</span><br><span class="line">make </span><br><span class="line">make install</span><br><span class="line">mv <span class="regexp">/usr/</span>bin<span class="regexp">/python /u</span>sr<span class="regexp">/bin/</span>python_bak</span><br><span class="line">ln -s <span class="regexp">/opt/</span>python3<span class="regexp">/bin/</span>python3 <span class="regexp">/usr/</span>bin/python</span><br><span class="line">ln -s <span class="regexp">/opt/</span>python3<span class="regexp">/bin/</span>pip3 <span class="regexp">/usr/</span>bin/pip</span><br><span class="line">python -V</span><br></pre></td></tr></table></figure><h1 id="python源配置"><a class="markdownIt-Anchor" href="#python源配置"></a> Python源配置</h1><ul><li>配置文件路径</li></ul><blockquote><p>C:\Users\Administrator.LAPTOP-DV6H7GK0\AppData\Roaming\pip\pip.ini</p></blockquote><ul><li>源配置</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/.pip</span><br><span class="line">cat &gt; ~/.pip/pip.conf &lt;&lt; EOF</span><br><span class="line">[<span class="keyword">global</span>]</span><br><span class="line"><span class="keyword">index</span>-url = https://repo.huaweicloud.com/repository/pypi/simple</span><br><span class="line">extra-<span class="keyword">index</span>-url = https://mirrors.aliyun.com/pypi/simple</span><br><span class="line">                  https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"></span><br><span class="line">[install]</span><br><span class="line"><span class="keyword">trusted</span>-host = repo.huaweicloud.com</span><br><span class="line">timeout = <span class="number">120</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;安装python3&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#安装python3&quot;&gt;&lt;/a&gt; 安装Python3&lt;/h1&gt;
&lt;figure class=&quot;highlight awk&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gu</summary>
      
    
    
    
    <category term="Python" scheme="https://www.blog.candle-lion.com/categories/Python/"/>
    
    
    <category term="Python" scheme="https://www.blog.candle-lion.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>aiphoto环境搭建</title>
    <link href="https://www.blog.candle-lion.com/2022/01/01/172a3ed925db/"/>
    <id>https://www.blog.candle-lion.com/2022/01/01/172a3ed925db/</id>
    <published>2022-01-01T02:19:17.880Z</published>
    <updated>2022-10-12T13:26:09.257Z</updated>
    
    <content type="html"><![CDATA[<h1 id="下载aiphoto源代码"><a class="markdownIt-Anchor" href="#下载aiphoto源代码"></a> 下载aiphoto源代码</h1><p><a href="https://github.com/itainf/aiphoto">https://github.com/itainf/aiphoto</a><br /><a href="./aiphoto-master.zip">aiphoto-master.zip</a></p><p><a href="https://github.com/xuebinqin/U-2-Net">https://github.com/xuebinqin/U-2-Net</a><br /><a href="./U-2-Net-master.zip">U-2-Net-master.zip</a></p><p><a href="https://www.python.org/ftp/python/3.7.0/Python-3.7.0.tgz">https://www.python.org/ftp/python/3.7.0/Python-3.7.0.tgz</a><br /><a href="./Python-3.7.0.tgz">Python-3.7.0.tgz</a></p><h1 id="安装前准备"><a class="markdownIt-Anchor" href="#安装前准备"></a> 安装前准备</h1><h2 id="安装python37"><a class="markdownIt-Anchor" href="#安装python37"></a> 安装python3.7</h2><blockquote><p>此处仅以centos举例</p></blockquote><ul><li>下载并编译安装python<br /><a href="source/_posts/server/Linux/linux_source_config.md">yum源配置</a></li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 准备编译安装目录</span></span><br><span class="line">mkdir <span class="regexp">/opt/</span></span><br><span class="line">cd <span class="regexp">/opt/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载源码</span></span><br><span class="line">wget https:<span class="regexp">//</span>www.python.org<span class="regexp">/ftp/</span>python<span class="regexp">/3.7.0/</span>Python-<span class="number">3.7</span>.<span class="number">0</span>.tgz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar xvf Python-<span class="number">3.7</span>.<span class="number">0</span>.tgz</span><br><span class="line">cd <span class="regexp">/opt/</span>Python-<span class="number">3.7</span>.<span class="number">0</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 安装依赖，安装前请自行配置yum源</span></span><br><span class="line">yum -y install make automake gcc-c++ kernel-devel unzip gcc zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel anaconda python3-devel python-devel</span><br><span class="line">.<span class="regexp">/configure --prefix=/</span>opt/python3</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置pip库</span></span><br><span class="line">sed -i <span class="string">&#x27;s|^USER_SITE = None|USER_SITE = &quot;/opt/python3/lib/python3.7/site-packages&quot;|g&#x27;</span> <span class="regexp">/opt/</span>python3<span class="regexp">/lib/</span>python3.<span class="number">7</span>/site.py</span><br><span class="line">sed -i <span class="string">&#x27;s|^USER_BASE = None|USER_BASE = &quot;/opt/python3/&quot;|g&#x27;</span> <span class="regexp">/opt/</span>python3<span class="regexp">/lib/</span>python3.<span class="number">7</span>/site.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置执行命令</span></span><br><span class="line">ln -s <span class="regexp">/opt/</span>python3<span class="regexp">/bin/</span>python3.<span class="number">7</span> <span class="regexp">/usr/</span>bin/python3.<span class="number">7</span></span><br><span class="line">ln -s <span class="regexp">/opt/</span>python3<span class="regexp">/bin/</span>pip3.<span class="number">7</span> <span class="regexp">/usr/</span>bin/pip3.<span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查Python安装情况，如下图即为成功</span></span><br></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3<span class="number">.7</span> -V</span><br></pre></td></tr></table></figure><p><img src="./001.jpg" alt="alt &quot;001&quot;" /></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3.<span class="number">7</span> <span class="comment">--version</span></span><br></pre></td></tr></table></figure><p><img src="./002.jpg" alt="alt &quot;002&quot;" /></p><h2 id="pip源配置"><a class="markdownIt-Anchor" href="#pip源配置"></a> pip源配置</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># pip源配置 自己视情况而定，此处配置是为了解决服务器下载pip模块慢的问题</span><br><span class="line">mkdir -p ~/.pip/</span><br><span class="line">touch ~/.pip/pip.conf</span><br><span class="line"></span><br><span class="line"># 大家注意使用前，手动访问下<span class="keyword">index</span>-url地址是否可以打开，自己挑选配置</span><br><span class="line"># 阿里云镜像源配置</span><br><span class="line">cat &gt; ~/.pip/pip.conf &lt;&lt; EOF</span><br><span class="line">[golbal]</span><br><span class="line"><span class="keyword">index</span>-url = http://mirrors.aliyun.com/pypi/simple</span><br><span class="line"><span class="keyword">trusted</span>-host = mirrors.aliyun.com</span><br><span class="line">timeout=<span class="number">6000</span></span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 华为云镜像源配置</span><br><span class="line">cat &gt; ~/.pip/pip.conf &lt;&lt; EOF</span><br><span class="line">[<span class="keyword">global</span>]</span><br><span class="line"><span class="keyword">index</span>-url = https://repo.huaweicloud.com/repository/pypi/simple</span><br><span class="line"><span class="keyword">trusted</span>-host = repo.huaweicloud.com</span><br><span class="line">timeout = <span class="number">120</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h2 id="安装依赖包"><a class="markdownIt-Anchor" href="#安装依赖包"></a> 安装依赖包</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3.<span class="number">7</span> <span class="keyword">install </span>--upgrade pip</span><br><span class="line">pip3.<span class="number">7</span> <span class="keyword">install </span><span class="keyword">scikit-image </span>torch torchvision pymatting rembg cmake dlib</span><br></pre></td></tr></table></figure><h2 id="安装conda"><a class="markdownIt-Anchor" href="#安装conda"></a> 安装conda</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/opt/</span></span><br><span class="line">wget -c https:<span class="regexp">//</span>repo.continuum.io<span class="regexp">/miniconda/</span>Miniconda3-latest-Linux-x86_64.sh</span><br><span class="line">bash Miniconda3-latest-Linux-x86_64.sh</span><br><span class="line">敲击回车后，输入q键，然后按照如下顺序执行</span><br><span class="line">输入yes,敲击回车后在敲击回车即可</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置命令</span></span><br><span class="line">ln -s ~<span class="regexp">/miniconda3/</span>bin<span class="regexp">/conda /u</span>sr<span class="regexp">/bin/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 源配置</span></span><br><span class="line">cat &gt; ~/.condarc &lt;&lt;EOF</span><br><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">show_channel_urls: true</span><br><span class="line">default_channels:</span><br><span class="line">  - https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>pkgs/main</span><br><span class="line">  - https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>pkgs/free</span><br><span class="line">  - https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>pkgs/r</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  msys2: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  bioconda: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  menpo: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  pytorch: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  simpleitk: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">EOF</span><br><span class="line"><span class="comment"># 安装使用到模块</span></span><br><span class="line">conda install -y pytorch torchvision cudatoolkit=<span class="number">10.2</span> -c pytorch</span><br></pre></td></tr></table></figure><h2 id="安装u2net"><a class="markdownIt-Anchor" href="#安装u2net"></a> 安装u2net</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/opt/</span></span><br><span class="line">wget https:<span class="regexp">//</span>codeload.github.com<span class="regexp">/xuebinqin/</span>U-<span class="number">2</span>-Net<span class="regexp">/zip/</span>refs<span class="regexp">/heads/m</span>aster</span><br><span class="line">unzip U-<span class="number">2</span>-Net-master.zip</span><br><span class="line">mv U-<span class="number">2</span>-Net-master u2net</span><br></pre></td></tr></table></figure><h1 id="搭建aiphoto"><a class="markdownIt-Anchor" href="#搭建aiphoto"></a> 搭建aiphoto</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/opt/</span></span><br><span class="line">wget https:<span class="regexp">//</span>codeload.github.com<span class="regexp">/itainf/</span>aiphoto<span class="regexp">/zip/</span>refs<span class="regexp">/heads/m</span>aster</span><br><span class="line">unzip aiphoto-master.zip</span><br><span class="line">mv aiphoto-master aiphoto</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;下载aiphoto源代码&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#下载aiphoto源代码&quot;&gt;&lt;/a&gt; 下载aiphoto源代码&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/itainf/aiphoto</summary>
      
    
    
    
    <category term="Python" scheme="https://www.blog.candle-lion.com/categories/Python/"/>
    
    
    <category term="Python" scheme="https://www.blog.candle-lion.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>EMQ X Broker编译未完待续</title>
    <link href="https://www.blog.candle-lion.com/2022/01/01/aedb0c33994c/"/>
    <id>https://www.blog.candle-lion.com/2022/01/01/aedb0c33994c/</id>
    <published>2022-01-01T02:19:17.833Z</published>
    <updated>2023-08-19T21:20:14.067Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-拉取基础镜像"><a class="markdownIt-Anchor" href="#1-拉取基础镜像"></a> 1. 拉取基础镜像</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos:latest</span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行基础镜像</span></span><br><span class="line">run_container_id=$(docker run -it -d --name=emqx --net=host $(docker images | grep centos | grep latest | awk &#x27;&#123;print $3&#125;&#x27;) tail -f /dev/null)</span><br><span class="line">docker cp /etc/yum.repos.d/CentOS-Base.repo $&#123;run_container_id&#125;:/etc/yum.repos.d/</span><br><span class="line">docker exec -it $&#123;run_container_id&#125; bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装依赖</span></span><br><span class="line">yum install -y git</span><br><span class="line">git config --global http.sslVerify false</span><br><span class="line">git config --global http.postBuffer 1024288000</span><br></pre></td></tr></table></figure><h1 id="2安装wxwidgets"><a class="markdownIt-Anchor" href="#2安装wxwidgets"></a> 2.安装wxWidgets</h1><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">yum -y install bzip2 gcc-c++ gcc glibc-devel make ncurses-devel xmlto perl gtk3 gtk3-devel gtk3-*</span><br><span class="line"><span class="comment"># 官网下载 https://www.wxwidgets.org/downloads/</span></span><br><span class="line"><span class="comment"># 拷贝到容器中</span></span><br><span class="line">docker cp <span class="string">/root/wxWidgets-3.1.5.tar.bz2</span> $&#123;run_container_id&#125;:<span class="string">/opt/</span></span><br><span class="line">tar -jxvf wxWidgets-3.1.5.tar.bz2</span><br><span class="line"><span class="keyword">cd</span> wxWidgets-3.1.5</span><br><span class="line"><span class="string">./configure</span> <span class="params">--with-gtk=3</span> <span class="params">--without-libjpeg</span> <span class="params">--without-libtiff</span></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment"># 检查安装</span></span><br><span class="line">wx-config <span class="params">--version</span></span><br></pre></td></tr></table></figure><h1 id="3安装erlang"><a class="markdownIt-Anchor" href="#3安装erlang"></a> 3.安装erlang</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/</span><br><span class="line">wget http://erlang.org/download/otp_src_22.1.tar.gz</span><br><span class="line">tar xvf otp_src_22.1.tar.gz</span><br><span class="line">cd otp_src_22.1</span><br><span class="line">yum install -y gcc glibc-devel make ncurses-devel openssl-devel autoconf</span><br><span class="line">yum install -y unixODBC unixODBC-devel</span><br><span class="line">./configure --prefix=/usr/local/erlang</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">ln -sf /usr/local/erlang/bin/erl /usr/local/bin/</span><br><span class="line">export PATH=$PATH:/usr/local/erlang/bin/</span><br></pre></td></tr></table></figure><h1 id="4编译emq-x-broker"><a class="markdownIt-Anchor" href="#4编译emq-x-broker"></a> 4.编译EMQ X Broker</h1><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 下载软件包</span><br><span class="line"><span class="built_in">mkdir</span> /<span class="keyword">opt</span></span><br><span class="line"><span class="keyword">cd</span> /<span class="keyword">opt</span>/</span><br><span class="line">git clone -<span class="keyword">b</span> v4.<span class="number">3.5</span> http<span class="variable">s:</span>//github.<span class="keyword">com</span>/emqx/emqx.git</span><br><span class="line"><span class="keyword">cd</span> emqx</span><br><span class="line"><span class="keyword">make</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-拉取基础镜像&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-拉取基础镜像&quot;&gt;&lt;/a&gt; 1. 拉取基础镜像&lt;/h1&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gu</summary>
      
    
    
    
    <category term="软件" scheme="https://www.blog.candle-lion.com/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="Linux" scheme="https://www.blog.candle-lion.com/tags/Linux/"/>
    
  </entry>
  
</feed>
